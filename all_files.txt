]633;E;for file in $(find . -name "*.html" -o -name "*.js" -o -name "*.css" -o -name "*.json" | grep -v node_modules | head -20);fe3d7b4c-6cdc-4564-b4d5-cd68cc4718c3]633;C=== FILE: ./admin-style.css ===
/* Admin Styles */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Inter', sans-serif;
    background: #f5f5f5;
    color: #333;
}

.admin-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
}

.admin-header {
    background: white;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    margin-bottom: 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.admin-header h1 {
    color: #2c5aa0;
    font-size: 1.5rem;
}

.admin-nav {
    display: flex;
    gap: 10px;
}

.admin-tabs {
    display: flex;
    background: white;
    border-radius: 10px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    margin-bottom: 20px;
    overflow: hidden;
}

.tab-button {
    flex: 1;
    padding: 15px 20px;
    border: none;
    background: transparent;
    cursor: pointer;
    font-size: 14px;
    font-weight: 500;
    transition: all 0.3s ease;
}

.tab-button:hover {
    background: #f8f9fa;
}

.tab-button.active {
    background: #2c5aa0;
    color: white;
}

.tab-content {
    background: white;
    border-radius: 10px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    padding: 30px;
}

.tab-pane {
    display: none;
}

.tab-pane.active {
    display: block;
}

.admin-section {
    margin-bottom: 30px;
}

.admin-section h3 {
    color: #2c5aa0;
    margin-bottom: 20px;
    font-size: 1.2rem;
}

.admin-hint {
    color: #666;
    font-size: 14px;
    margin-bottom: 15px;
    font-style: italic;
}

.admin-form {
    max-width: 600px;
}

.form-group {
    margin-bottom: 20px;
}

.form-group label {
    display: block;
    margin-bottom: 5px;
    font-weight: 500;
    color: #333;
}

.form-group input,
.form-group textarea,
.form-group select {
    width: 100%;
    padding: 10px 15px;
    border: 1px solid #ddd;
    border-radius: 5px;
    font-size: 14px;
    transition: border-color 0.3s ease;
}

.form-group input:focus,
.form-group textarea:focus,
.form-group select:focus {
    outline: none;
    border-color: #2c5aa0;
}

.btn-admin {
    background: #2c5aa0;
    color: white;
    border: none;
    padding: 12px 25px;
    border-radius: 5px;
    cursor: pointer;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    gap: 8px;
    font-size: 14px;
    font-weight: 500;
    transition: background 0.3s ease;
}

.btn-admin:hover {
    background: #1e3d6f;
}

.btn-admin.secondary {
    background: #6c757d;
}

.btn-admin.secondary:hover {
    background: #545b62;
}

.btn-admin.danger {
    background: #dc3545;
}

.btn-admin.danger:hover {
    background: #c82333;
}

.btn-admin.warning {
    background: #ffc107;
    color: #000;
}

.btn-admin.warning:hover {
    background: #e0a800;
}

.table-container {
    overflow-x: auto;
}

.admin-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 10px;
}

.admin-table th,
.admin-table td {
    padding: 12px 15px;
    text-align: left;
    border-bottom: 1px solid #eee;
}

.admin-table th {
    background: #f8f9fa;
    font-weight: 600;
    color: #333;
}

.admin-table tr:hover {
    background: #f8f9fa;
}

.btn-small {
    padding: 6px 12px;
    border: none;
    border-radius: 3px;
    cursor: pointer;
    font-size: 12px;
    margin-right: 5px;
}

.btn-small.danger {
    background: #dc3545;
    color: white;
}

.btn-small.danger:hover {
    background: #c82333;
}

/* Responsive */
@media (max-width: 768px) {
    .admin-container {
        padding: 10px;
    }
    
    .admin-header {
        flex-direction: column;
        gap: 15px;
        text-align: center;
    }
    
    .admin-tabs {
        flex-direction: column;
    }
    
    .tab-content {
        padding: 20px;
    }
}

/* –°—Ç–∏–ª–∏ –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã —Ç—É—Ä–æ–≤ */
.tour-info {
    display: flex;
    flex-direction: column;
    gap: 5px;
}

.tour-info small {
    color: #666;
    font-size: 0.8rem;
}

.country-badge {
    background: #e3f2fd;
    color: #1976d2;
    padding: 4px 8px;
    border-radius: 12px;
    font-size: 0.8rem;
    font-weight: 500;
}

.price-tag {
    background: #e8f5e8;
    color: #2e7d32;
    padding: 6px 12px;
    border-radius: 15px;
    font-weight: 700;
    font-size: 0.9rem;
}

.duration-badge {
    background: #fff3e0;
    color: #ef6c00;
    padding: 4px 8px;
    border-radius: 10px;
    font-size: 0.8rem;
    font-weight: 500;
}

.tour-count-badge {
    background: #2c5aa0;
    color: white;
    padding: 4px 8px;
    border-radius: 10px;
    font-size: 0.8rem;
    font-weight: 600;
    min-width: 25px;
    display: inline-block;
    text-align: center;
}

.action-buttons {
    display: flex;
    gap: 5px;
}

.btn-small.warning {
    background: #ffc107;
    color: #000;
}

.btn-small.warning:hover {
    background: #e0a800;
}

/* –£–ª—É—á—à–µ–Ω–∏—è –¥–ª—è —Ñ–æ—Ä–º */
.form-group input[type="number"] {
    -moz-appearance: textfield;
}

.form-group input[type="number"]::-webkit-outer-spin-button,
.form-group input[type="number"]::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
}

/* –ê–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è —Ç–∞–±–ª–∏—Ü */
.admin-table tr {
    transition: background-color 0.2s ease;
}

.admin-table tr:hover {
    background-color: #f8f9fa;
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –∞–¥–º–∏–Ω–∫–∏ */
@media (max-width: 768px) {
    .admin-table {
        font-size: 0.9rem;
    }
    
    .action-buttons {
        flex-direction: column;
    }
    
    .tour-info {
        min-width: 150px;
    }
    
    .country-badge,
    .price-tag,
    .duration-badge {
        font-size: 0.7rem;
        padding: 3px 6px;
    }
}



=== FILE: ./page-editor.html ===
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–†–µ–¥–∞–∫—Ç–æ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü - WorldTravel</title>
    <link rel="stylesheet" href="admin-style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .editor-container {
            display: flex;
            height: 100vh;
        }

        .preview-panel {
            flex: 1;
            background: white;
            display: flex;
            flex-direction: column;
        }

        .editor-panel {
            width: 500px;
            background: white;
            border-left: 2px solid #e1e5e9;
            display: flex;
            flex-direction: column;
        }

        .panel-header {
            padding: 20px;
            background: #2c5aa0;
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .panel-content {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
        }

        .preview-frame-container {
            flex: 1;
            position: relative;
            overflow: hidden;
        }

        .preview-frame {
            width: 100%;
            height: 100%;
            border: none;
        }

        .section-item {
            padding: 15px;
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 10px;
        }

        .section-item:hover {
            border-color: #2c5aa0;
            background: #e3f2fd;
        }

        .section-item.active {
            border-color: #2c5aa0;
            background: #2c5aa0;
            color: white;
        }

        .save-indicator {
            background: #d4edda;
            color: #155724;
            padding: 10px 15px;
            border-radius: 5px;
            margin: 10px 20px;
            display: none;
            align-items: center;
            gap: 8px;
        }

        .save-indicator.show {
            display: flex;
        }

        /* Enhanced Editor Styles */
        .enhanced-editor-section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid #e9ecef;
        }
        
        .enhanced-editor-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #dee2e6;
        }
        
        .enhanced-editor-title {
            color: #2c5aa0;
            font-size: 1.2em;
            font-weight: 600;
        }
        
        .stats-grid-editor {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 15px 0;
        }
        
        .stat-editor-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #dee2e6;
        }
        
        .image-manager-section {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
            border: 2px dashed #dee2e6;
        }
        
        .image-preview-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            margin: 15px 0;
        }
        
        .image-preview {
            max-width: 300px;
            max-height: 200px;
            border-radius: 8px;
            border: 2px solid #e9ecef;
        }
        
        .image-actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .block-item {
            background: white;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid #2c5aa0;
        }
        
        .add-block-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .add-block-btn:hover {
            background: #218838;
        }
        
        .remove-block-btn {
            background: #dc3545;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }
        
        .remove-block-btn:hover {
            background: #c82333;
        }
        
        .enhanced-form-group {
            margin-bottom: 15px;
        }
        
        .enhanced-form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #495057;
        }
        
        .enhanced-form-control {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #ced4da;
            border-radius: 6px;
            font-size: 14px;
        }
        
        .enhanced-form-control:focus {
            outline: none;
            border-color: #2c5aa0;
            box-shadow: 0 0 0 3px rgba(44, 90, 160, 0.1);
        }
    </style>
</head>
<body>
    <div class="editor-container">
        <div class="preview-panel">
            <div class="panel-header">
                <h2>–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã</h2>
                <div>
                    <button class="btn-admin warning" onclick="editor.safeRefresh()">
                        <i class="fas fa-sync"></i> –û–±–Ω–æ–≤–∏—Ç—å
                    </button>
                    <button class="btn-admin success" onclick="editor.saveAndExit()" style="margin-left: 10px;">
                        <i class="fas fa-save"></i> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ –≤—ã–π—Ç–∏
                    </button>
                </div>
            </div>
            
            <div class="save-indicator" id="save-indicator">
                <i class="fas fa-check-circle"></i>
                <span id="save-message">–ò–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã</span>
            </div>

            <div class="preview-frame-container">
                <iframe class="preview-frame" id="preview-frame" src="index.html?editor=true&nocache=1"></iframe>
            </div>
        </div>

        <div class="editor-panel">
            <div class="panel-header">
                <h2>–†–µ–¥–∞–∫—Ç–æ—Ä –∫–æ–Ω—Ç–µ–Ω—Ç–∞</h2>
            </div>

            <div class="panel-content">
                <h3>–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã</h3>
                <p style="color: #666; margin-bottom: 20px;">–í—ã–±–µ—Ä–∏—Ç–µ —Å–µ–∫—Ü–∏—é –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</p>
                
                <div id="section-list">
                    <div class="section-item" data-section="hero">
                        <div class="section-title">–ì–ª–∞–≤–Ω—ã–π –±–∞–Ω–Ω–µ—Ä</div>
                        <div class="section-desc">–ó–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π</div>
                    </div>
                    <div class="section-item" data-section="about">
                        <div class="section-title">–û –∫–æ–º–ø–∞–Ω–∏–∏</div>
                        <div class="section-desc">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–º–ø–∞–Ω–∏–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</div>
                    </div>
                    <div class="section-item" data-section="services">
                        <div class="section-title">–£—Å–ª—É–≥–∏</div>
                        <div class="section-desc">–°–ø–∏—Å–æ–∫ —É—Å–ª—É–≥ –∫–æ–º–ø–∞–Ω–∏–∏</div>
                    </div>
                    <div class="section-item" data-section="destinations">
                        <div class="section-title">–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è</div>
                        <div class="section-desc">–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è</div>
                    </div>
                    <div class="section-item" data-section="contact">
                        <div class="section-title">–ö–æ–Ω—Ç–∞–∫—Ç—ã</div>
                        <div class="section-desc">–ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</div>
                    </div>
                </div>

                <div id="content-editor" style="margin-top: 30px; display: none;">
                    <!-- Basic editor fields -->
                    <div class="basic-editor">
                        <div class="form-group">
                            <label>–ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å–µ–∫—Ü–∏–∏:</label>
                            <input type="text" class="form-control" id="section-title">
                        </div>
                        <div class="form-group">
                            <label>–û–ø–∏—Å–∞–Ω–∏–µ:</label>
                            <textarea class="form-control" id="section-description" rows="4"></textarea>
                        </div>
                        <button class="btn-admin" onclick="editor.saveSection()">
                            <i class="fas fa-save"></i> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
                        </button>
                    </div>
                    
                    <!-- Enhanced editor will be injected here -->
                    <div id="enhanced-editor-content"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Enhanced Page Editor with fixed stats and services - FIXED VERSION
        class SimplePageEditor {
            constructor() {
                this.currentSection = null;
                this.currentData = null;
                this.init();
            }

            init() {
                console.log('üöÄ Page Editor initialized');
                this.setupSectionHandlers();
                this.loadData();
            }

            setupSectionHandlers() {
                const sectionItems = document.querySelectorAll('.section-item');
                sectionItems.forEach(item => {
                    item.addEventListener('click', () => {
                        const sectionId = item.getAttribute('data-section');
                        this.selectSection(sectionId);
                    });
                });
            }

            loadData() {
                if (window.dataManager) {
                    this.currentData = window.dataManager.getData();
                    console.log('üìÅ Initial data loaded:', this.currentData);
                    
                    if (!this.currentData) {
                        this.currentData = this.getDefaultData();
                        console.log('üìÅ Using default data');
                    }
                    
                    if (!this.currentData.content) {
                        this.currentData.content = {};
                        console.log('üìÅ Created content structure');
                    }
                } else {
                    this.currentData = this.getDefaultData();
                    console.log('üìÅ DataManager not available, using default data');
                }
            }

            getDefaultData() {
                return {
                    content: {
                        hero: {
                            title: "–û—Ç–∫—Ä–æ–π—Ç–µ –º–∏—Ä —Å WorldTravel",
                            description: "–ú—ã —Å–æ–∑–¥–∞–µ–º –Ω–µ–∑–∞–±—ã–≤–∞–µ–º—ã–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è –ø–æ –≤—Å–µ–º—É –º–∏—Ä—É. –û—Ç —ç–∫–∑–æ—Ç–∏—á–µ—Å–∫–∏—Ö –ø–ª—è–∂–µ–π –¥–æ –≥–æ—Ä–Ω—ã—Ö –≤–µ—Ä—à–∏–Ω - –≤–∞—à–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –∑–¥–µ—Å—å.",
                            buttonText: "–ù–∞—á–∞—Ç—å –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ",
                            backgroundImage: ""
                        },
                        about: {
                            title: "–û –Ω–∞—Å",
                            description: "WorldTravel - —ç—Ç–æ –∫–æ–º–∞–Ω–¥–∞ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –ø—É—Ç–µ—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫–æ–≤ –∏ —ç–∫—Å–ø–µ—Ä—Ç–æ–≤ –ø–æ —Ç—É—Ä–∏–∑–º—É —Å –±–æ–ª–µ–µ —á–µ–º 10-–ª–µ—Ç–Ω–∏–º –æ–ø—ã—Ç–æ–º —Ä–∞–±–æ—Ç—ã. –ú—ã —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º—Å—è –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–∏ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ –∏ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö travel-—Ä–µ—à–µ–Ω–∏–π.",
                            image: "",
                            stats: [
                                { value: "5000+", label: "–î–æ–≤–æ–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤" },
                                { value: "50+", label: "–°—Ç—Ä–∞–Ω –º–∏—Ä–∞" },
                                { value: "10 –ª–µ—Ç", label: "–û–ø—ã—Ç–∞ —Ä–∞–±–æ—Ç—ã" }
                            ]
                        },
                        services: {
                            title: "–£—Å–ª—É–≥–∏",
                            description: "–ù–∞—à–∏ –æ—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—Å–ª—É–≥ –¥–ª—è –≤–∞—à–µ–≥–æ –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–≥–æ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è",
                            services: [
                                {
                                    title: "–ê–≤–∏–∞–±–∏–ª–µ—Ç—ã",
                                    description: "–ü–æ–¥–±–æ—Ä –∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ª—É—á—à–∏—Ö –∞–≤–∏–∞–ø–µ—Ä–µ–ª–µ—Ç–æ–≤ –ø–æ –≤—ã–≥–æ–¥–Ω—ã–º —Ü–µ–Ω–∞–º",
                                    icon: "fas fa-plane"
                                },
                                {
                                    title: "–û—Ç–µ–ª–∏", 
                                    description: "–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–µ–ª–µ–π –ª—é–±–æ–≥–æ —É—Ä–æ–≤–Ω—è –∫–æ–º—Ñ–æ—Ä—Ç–∞ –ø–æ –≤—Å–µ–º—É –º–∏—Ä—É",
                                    icon: "fas fa-hotel"
                                }
                            ]
                        },
                        destinations: {
                            title: "–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è", 
                            subtitle: "–û—Ç–∫—Ä–æ–π—Ç–µ –¥–ª—è —Å–µ–±—è –ª—É—á—à–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–∏—Ä–∞ —Å –Ω–∞—à–∏–º–∏ —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–º–∏ —Ç—É—Ä–∞–º–∏"
                        },
                        contact: {
                            title: "–ö–æ–Ω—Ç–∞–∫—Ç—ã",
                            description: "–°–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏ –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –≤–∞—à–µ–≥–æ –∏–¥–µ–∞–ª—å–Ω–æ–≥–æ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è"
                        }
                    },
                    lastUpdate: new Date().toISOString()
                };
            }

            selectSection(sectionId) {
                console.log('üéØ Selecting section:', sectionId);
                
                document.querySelectorAll('.section-item').forEach(item => {
                    item.classList.remove('active');
                });
                document.querySelector(`[data-section="${sectionId}"]`).classList.add('active');

                this.currentSection = sectionId;
                this.loadSectionData(sectionId);
                
                document.getElementById('content-editor').style.display = 'block';
                this.injectEnhancedEditor();
            }

            loadSectionData(sectionId) {
                console.log('üìù Loading section data for:', sectionId);
                
                if (!this.currentData.content[sectionId]) {
                    const defaultData = this.getDefaultData();
                    this.currentData.content[sectionId] = defaultData.content[sectionId] || {};
                    console.log('üìÅ Created section data:', this.currentData.content[sectionId]);
                }

                const sectionData = this.currentData.content[sectionId];
                if (sectionData) {
                    document.getElementById('section-title').value = sectionData.title || '';
                    document.getElementById('section-description').value = sectionData.description || '';
                    console.log('‚úÖ Loaded basic data:', { 
                        title: sectionData.title, 
                        description: sectionData.description 
                    });
                }
            }

            injectEnhancedEditor() {
                const contentEditor = document.getElementById('enhanced-editor-content');
                if (!contentEditor) {
                    console.error('‚ùå Enhanced editor container not found');
                    return;
                }

                contentEditor.innerHTML = '';
                console.log('üîÑ Injecting enhanced editor for section:', this.currentSection);

                switch (this.currentSection) {
                    case 'hero':
                        this.injectHeroEditor(contentEditor);
                        break;
                    case 'about':
                        this.injectAboutEditor(contentEditor);
                        break;
                    case 'services':
                        this.injectServicesEditor(contentEditor);
                        break;
                    case 'destinations':
                        this.injectDestinationsEditor(contentEditor);
                        break;
                    case 'contact':
                        this.injectContactEditor(contentEditor);
                        break;
                    default:
                        console.warn('‚ö†Ô∏è Unknown section:', this.currentSection);
                }
            }

            // Hero Section Editor
            injectHeroEditor(container) {
                const data = this.currentData.content.hero || {};
                console.log('üéØ Injecting hero editor with data:', data);
                
                const html = `
                    <div class="enhanced-editor-section">
                        <div class="enhanced-editor-header">
                            <div class="enhanced-editor-title">üéØ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</div>
                        </div>
                        
                        <div class="image-manager-section">
                            <div class="enhanced-form-group">
                                <label>–§–æ–Ω–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ:</label>
                                <div class="image-preview-container">
                                    ${data.backgroundImage ? 
                                        `<img src="${data.backgroundImage}" alt="Preview" class="image-preview" onerror="this.style.display='none'">` :
                                        `<div style="text-align: center; color: #6c757d; padding: 20px;">
                                            <i class="fas fa-image" style="font-size: 3em; margin-bottom: 10px;"></i>
                                            <div>–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ</div>
                                        </div>`
                                    }
                                    <div class="image-actions">
                                        <button type="button" class="btn-admin" onclick="editor.uploadImage('backgroundImage')">
                                            <i class="fas fa-upload"></i> –ó–∞–≥—Ä—É–∑–∏—Ç—å
                                        </button>
                                        <button type="button" class="btn-admin secondary" onclick="editor.setImageUrl('backgroundImage')">
                                            <i class="fas fa-link"></i> URL
                                        </button>
                                        ${data.backgroundImage ? `
                                        <button type="button" class="btn-admin danger" onclick="editor.removeImage('backgroundImage')">
                                            <i class="fas fa-trash"></i> –£–¥–∞–ª–∏—Ç—å
                                        </button>
                                        ` : ''}
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="enhanced-form-group">
                            <label>–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏:</label>
                            <input type="text" class="enhanced-form-control" id="hero-button-text" 
                                   value="${data.buttonText || '–ù–∞—á–∞—Ç—å –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ'}" 
                                   oninput="editor.updateHeroField('buttonText', this.value)">
                        </div>
                    </div>
                `;

                container.innerHTML = html;
            }

            // About Section Editor with Stats - FIXED
            injectAboutEditor(container) {
                const data = this.currentData.content.about || {};
                const stats = data.stats || [];
                console.log('üè¢ Injecting about editor with stats:', stats);

                const html = `
                    <div class="enhanced-editor-section">
                        <div class="enhanced-editor-header">
                            <div class="enhanced-editor-title">üìä –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π</div>
                            <button type="button" class="add-block-btn" onclick="editor.addStatBlock()">
                                <i class="fas fa-plus"></i> –î–æ–±–∞–≤–∏—Ç—å –±–ª–æ–∫
                            </button>
                        </div>

                        <div class="image-manager-section">
                            <div class="enhanced-form-group">
                                <label>–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏:</label>
                                <div class="image-preview-container">
                                    ${data.image ? 
                                        `<img src="${data.image}" alt="Preview" class="image-preview" onerror="this.style.display='none'">` :
                                        `<div style="text-align: center; color: #6c757d; padding: 20px;">
                                            <i class="fas fa-building" style="font-size: 3em; margin-bottom: 10px;"></i>
                                            <div>–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ</div>
                                        </div>`
                                    }
                                    <div class="image-actions">
                                        <button type="button" class="btn-admin" onclick="editor.uploadImage('image')">
                                            <i class="fas fa-upload"></i> –ó–∞–≥—Ä—É–∑–∏—Ç—å
                                        </button>
                                        <button type="button" class="btn-admin secondary" onclick="editor.setImageUrl('image')">
                                            <i class="fas fa-link"></i> URL
                                        </button>
                                        ${data.image ? `
                                        <button type="button" class="btn-admin danger" onclick="editor.removeImage('image')">
                                            <i class="fas fa-trash"></i> –£–¥–∞–ª–∏—Ç—å
                                        </button>
                                        ` : ''}
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="stats-grid-editor" id="stats-editor-container">
                            ${stats.map((stat, index) => `
                                <div class="stat-editor-item">
                                    <div class="enhanced-form-group">
                                        <label>–ó–Ω–∞—á–µ–Ω–∏–µ:</label>
                                        <input type="text" class="enhanced-form-control stat-value" 
                                               value="${stat.value}" 
                                               oninput="editor.updateStatBlock(${index}, 'value', this.value)"
                                               placeholder="5000+">
                                    </div>
                                    <div class="enhanced-form-group">
                                        <label>–ü–æ–¥–ø–∏—Å—å:</label>
                                        <input type="text" class="enhanced-form-control stat-label" 
                                               value="${stat.label}" 
                                               oninput="editor.updateStatBlock(${index}, 'label', this.value)"
                                               placeholder="–î–æ–≤–æ–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤">
                                    </div>
                                    <div style="text-align: right;">
                                        <button type="button" class="remove-block-btn" onclick="editor.removeStatBlock(${index})">
                                            <i class="fas fa-trash"></i> –£–¥–∞–ª–∏—Ç—å
                                        </button>
                                    </div>
                                </div>
                            `).join('')}
                            ${stats.length === 0 ? `
                                <div style="text-align: center; padding: 40px 20px; color: #666; grid-column: 1 / -1;">
                                    <i class="fas fa-chart-bar" style="font-size: 3em; margin-bottom: 15px; display: block; color: #ccc;"></i>
                                    <p>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω–∞</p>
                                    <small>–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—ã–π –±–ª–æ–∫ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏</small>
                                </div>
                            ` : ''}
                        </div>
                    </div>
                `;

                container.innerHTML = html;
                console.log('‚úÖ About editor injected with', stats.length, 'stats blocks');
            }

            // Services Section Editor - FIXED
            injectServicesEditor(container) {
                const data = this.currentData.content.services || {};
                const services = data.services || [];
                console.log('‚ö° Injecting services editor with services:', services);

                const html = `
                    <div class="enhanced-editor-section">
                        <div class="enhanced-editor-header">
                            <div class="enhanced-editor-title">‚ö° –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Å–ª—É–≥–∞–º–∏</div>
                            <button type="button" class="add-block-btn" onclick="editor.addServiceBlock()">
                                <i class="fas fa-plus"></i> –î–æ–±–∞–≤–∏—Ç—å —É—Å–ª—É–≥—É
                            </button>
                        </div>

                        <div id="services-editor-container">
                            ${services.map((service, index) => `
                                <div class="block-item">
                                    <div style="display: grid; grid-template-columns: 1fr 1fr auto; gap: 15px; align-items: start; margin-bottom: 10px;">
                                        <div class="enhanced-form-group">
                                            <label>–ù–∞–∑–≤–∞–Ω–∏–µ —É—Å–ª—É–≥–∏:</label>
                                            <input type="text" class="enhanced-form-control service-title" 
                                                   value="${service.title}" 
                                                   oninput="editor.updateServiceBlock(${index}, 'title', this.value)"
                                                   placeholder="–ê–≤–∏–∞–±–∏–ª–µ—Ç—ã">
                                        </div>
                                        <div class="enhanced-form-group">
                                            <label>–ò–∫–æ–Ω–∫–∞:</label>
                                            <input type="text" class="enhanced-form-control service-icon" 
                                                   value="${service.icon}" 
                                                   oninput="editor.updateServiceBlock(${index}, 'icon', this.value)"
                                                   placeholder="fas fa-plane">
                                        </div>
                                        <div>
                                            <button type="button" class="remove-block-btn" onclick="editor.removeServiceBlock(${index})">
                                                <i class="fas fa-trash"></i> –£–¥–∞–ª–∏—Ç—å
                                            </button>
                                        </div>
                                    </div>
                                    <div class="enhanced-form-group">
                                        <label>–û–ø–∏—Å–∞–Ω–∏–µ —É—Å–ª—É–≥–∏:</label>
                                        <textarea class="enhanced-form-control service-description" rows="2"
                                                  oninput="editor.updateServiceBlock(${index}, 'description', this.value)"
                                                  placeholder="–û–ø–∏—Å–∞–Ω–∏–µ —É—Å–ª—É–≥–∏...">${service.description}</textarea>
                                    </div>
                                    ${service.icon ? `
                                    <div style="background: #e9ecef; padding: 8px 12px; border-radius: 4px; margin-top: 8px; font-size: 0.9em;">
                                        <i class="${service.icon}" style="margin-right: 6px;"></i>
                                        <span>–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∏–∫–æ–Ω–∫–∏</span>
                                    </div>
                                    ` : ''}
                                </div>
                            `).join('')}
                            ${services.length === 0 ? `
                                <div style="text-align: center; padding: 40px 20px; color: #666;">
                                    <i class="fas fa-concierge-bell" style="font-size: 3em; margin-bottom: 15px; display: block; color: #ccc;"></i>
                                    <p>–£—Å–ª—É–≥–∏ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã</p>
                                    <small>–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—É—é —É—Å–ª—É–≥—É</small>
                                </div>
                            ` : ''}
                        </div>
                    </div>
                `;

                container.innerHTML = html;
                console.log('‚úÖ Services editor injected with', services.length, 'services');
            }

            // Other section editors
            injectDestinationsEditor(container) {
                container.innerHTML = `
                    <div class="enhanced-editor-section">
                        <div class="enhanced-editor-header">
                            <div class="enhanced-editor-title">üåç –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</div>
                        </div>
                        <p style="color: #666; margin: 0;">–î–ª—è —ç—Ç–æ–π —Å–µ–∫—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ –æ—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</p>
                    </div>
                `;
            }

            injectContactEditor(container) {
                container.innerHTML = `
                    <div class="enhanced-editor-section">
                        <div class="enhanced-editor-header">
                            <div class="enhanced-editor-title">üìû –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</div>
                        </div>
                        <p style="color: #666; margin: 0;">–î–ª—è —ç—Ç–æ–π —Å–µ–∫—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ –æ—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</p>
                    </div>
                `;
            }

            // Data Management Methods
            updateHeroField(field, value) {
                console.log('üéØ Updating hero field:', field, value);
                if (!this.currentData.content.hero) {
                    this.currentData.content.hero = {};
                }
                this.currentData.content.hero[field] = value;
            }

            // Stats Management - FIXED
            addStatBlock() {
                console.log('‚ûï Adding stat block');
                
                if (!this.currentData.content.about) {
                    this.currentData.content.about = {};
                    console.log('üìÅ Created about section');
                }
                if (!this.currentData.content.about.stats) {
                    this.currentData.content.about.stats = [];
                    console.log('üìÅ Created stats array');
                }

                const newStat = {
                    value: '1000+',
                    label: '–ù–æ–≤—ã–π –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å'
                };
                
                this.currentData.content.about.stats.push(newStat);
                console.log('‚úÖ Added stat block:', newStat);
                console.log('üìä Current stats:', this.currentData.content.about.stats);

                this.showNotification('–ë–ª–æ–∫ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω', 'success');
                this.injectAboutEditor(document.getElementById('enhanced-editor-content'));
            }

            updateStatBlock(index, field, value) {
                console.log('üìä Updating stat block:', index, field, value);
                
                if (this.currentData.content.about?.stats?.[index]) {
                    this.currentData.content.about.stats[index][field] = value;
                    console.log('‚úÖ Stat block updated:', this.currentData.content.about.stats[index]);
                } else {
                    console.error('‚ùå Stat block not found at index:', index);
                }
            }

            removeStatBlock(index) {
                console.log('üóëÔ∏è Removing stat block:', index);
                
                if (this.currentData.content.about?.stats?.[index]) {
                    const removed = this.currentData.content.about.stats.splice(index, 1);
                    console.log('‚úÖ Stat block removed:', removed);
                    console.log('üìä Remaining stats:', this.currentData.content.about.stats);
                    
                    this.showNotification('–ë–ª–æ–∫ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —É–¥–∞–ª–µ–Ω', 'success');
                    this.injectAboutEditor(document.getElementById('enhanced-editor-content'));
                } else {
                    console.error('‚ùå Stat block not found at index:', index);
                }
            }

            // Services Management - FIXED
            addServiceBlock() {
                console.log('‚ûï Adding service block');
                
                if (!this.currentData.content.services) {
                    this.currentData.content.services = {};
                    console.log('üìÅ Created services section');
                }
                if (!this.currentData.content.services.services) {
                    this.currentData.content.services.services = [];
                    console.log('üìÅ Created services array');
                }

                const newService = {
                    title: '–ù–æ–≤–∞—è —É—Å–ª—É–≥–∞',
                    description: '–û–ø–∏—Å–∞–Ω–∏–µ –Ω–æ–≤–æ–π —É—Å–ª—É–≥–∏',
                    icon: 'fas fa-star'
                };
                
                this.currentData.content.services.services.push(newService);
                console.log('‚úÖ Added service block:', newService);
                console.log('‚ö° Current services:', this.currentData.content.services.services);

                this.showNotification('–£—Å–ª—É–≥–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞', 'success');
                this.injectServicesEditor(document.getElementById('enhanced-editor-content'));
            }

            updateServiceBlock(index, field, value) {
                console.log('‚ö° Updating service block:', index, field, value);
                
                if (this.currentData.content.services?.services?.[index]) {
                    this.currentData.content.services.services[index][field] = value;
                    console.log('‚úÖ Service block updated:', this.currentData.content.services.services[index]);
                } else {
                    console.error('‚ùå Service block not found at index:', index);
                }
            }

            removeServiceBlock(index) {
                console.log('üóëÔ∏è Removing service block:', index);
                
                if (this.currentData.content.services?.services?.[index]) {
                    const removed = this.currentData.content.services.services.splice(index, 1);
                    console.log('‚úÖ Service block removed:', removed);
                    console.log('‚ö° Remaining services:', this.currentData.content.services.services);
                    
                    this.showNotification('–£—Å–ª—É–≥–∞ —É–¥–∞–ª–µ–Ω–∞', 'success');
                    this.injectServicesEditor(document.getElementById('enhanced-editor-content'));
                } else {
                    console.error('‚ùå Service block not found at index:', index);
                }
            }

            // Image Management
            uploadImage(field) {
                const input = document.createElement('input');
                input.type = 'file';
                input.accept = 'image/*';
                input.onchange = (e) => {
                    const file = e.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = (e) => {
                            this.setImage(field, e.target.result);
                        };
                        reader.readAsDataURL(file);
                    }
                };
                input.click();
            }

            setImageUrl(field) {
                const url = prompt('–í–≤–µ–¥–∏—Ç–µ URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:');
                if (url) {
                    this.setImage(field, url);
                }
            }

            removeImage(field) {
                if (confirm('–£–¥–∞–ª–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ?')) {
                    this.setImage(field, '');
                }
            }

            setImage(field, url) {
                console.log('üñºÔ∏è Setting image for', field, url);
                
                if (!this.currentData.content[this.currentSection]) {
                    this.currentData.content[this.currentSection] = {};
                }
                this.currentData.content[this.currentSection][field] = url;
                
                this.showNotification('–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–æ', 'success');
                this.injectEnhancedEditor();
            }

            // Save Methods - FIXED: Removed calls to non-existent methods
            saveSection() {
                console.log('üíæ Saving section:', this.currentSection);
                
                if (!this.currentSection || !window.dataManager) {
                    console.error('‚ùå Cannot save: no section selected or DataManager not available');
                    return;
                }

                // Update basic fields
                const title = document.getElementById('section-title').value;
                const description = document.getElementById('section-description').value;

                if (!this.currentData.content[this.currentSection]) {
                    this.currentData.content[this.currentSection] = {};
                }

                this.currentData.content[this.currentSection].title = title;
                this.currentData.content[this.currentSection].description = description;

                console.log('üìù Basic fields updated:', { title, description });

                // Get main data and merge
                const mainData = window.dataManager.getData() || this.getDefaultData();
                if (!mainData.content) {
                    mainData.content = {};
                    console.log('üìÅ Created content in main data');
                }
                
                // Ensure the section exists in main data
                if (!mainData.content[this.currentSection]) {
                    mainData.content[this.currentSection] = {};
                }
                
                // Merge ALL changes including stats and services
                Object.assign(mainData.content[this.currentSection], this.currentData.content[this.currentSection]);
                
                console.log('üîÑ Merged section data:', this.currentSection, mainData.content[this.currentSection]);

                mainData.lastUpdate = new Date().toISOString();

                // Simply save the entire data structure
                if (window.dataManager.setData(mainData)) {
                    console.log('‚úÖ Data saved successfully');
                    this.showSaveIndicator('–ò–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ!');
                    this.safeRefresh();
                } else {
                    console.error('‚ùå Failed to save data');
                    alert('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è');
                }
            }

            safeRefresh() {
                const frame = document.getElementById('preview-frame');
                frame.src = frame.src.split('?')[0] + '?editor=true&nocache=' + Date.now();
                console.log('üîÑ Preview refreshed');
            }

            saveAndExit() {
                window.location.href = 'admin.html';
            }

            showSaveIndicator(message) {
                const indicator = document.getElementById('save-indicator');
                const messageEl = document.getElementById('save-message');
                
                messageEl.textContent = message;
                indicator.classList.add('show');
                
                setTimeout(() => {
                    indicator.classList.remove('show');
                }, 3000);
            }

            showNotification(message, type = 'success') {
                console.log(`üí¨ ${type}: ${message}`);
                alert(`${type === 'success' ? '‚úÖ' : '‚ùå'} ${message}`);
            }
        }

        // Initialize editor when dataManager is ready
        const initEditor = () => {
            if (window.dataManager) {
                console.log('üé¨ Initializing page editor...');
                window.editor = new SimplePageEditor();
                console.log('‚úÖ Page editor initialized successfully');
            } else {
                console.log('‚è≥ Waiting for DataManager...');
                setTimeout(initEditor, 100);
            }
        };

        document.addEventListener('DOMContentLoaded', initEditor);
    </script>
    <script src="data-manager.js"></script>
</body>
</html>



=== FILE: ./admin.js ===
// Complete Admin JavaScript with all fixes
console.log('üîÑ Admin JS loading...');

document.addEventListener('DOMContentLoaded', function() {
    console.log('‚úÖ Admin DOM loaded');
    initializeAdmin();
});

function initializeAdmin() {
    console.log('üöÄ Initializing admin...');
    
    const initInterval = setInterval(() => {
        if (window.dataManager) {
            clearInterval(initInterval);
            loadAdminData();
            setupAdminEventListeners();
            loadCountrySelect();
            console.log('‚úÖ Admin initialized successfully');
        }
    }, 100);

    setTimeout(() => {
        clearInterval(initInterval);
        if (!window.dataManager) {
            console.error('‚ùå DataManager not available');
            showAdminNotification('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.', 'error');
        }
    }, 5000);
}

function setupAdminEventListeners() {
    console.log('üîß Setting up admin event listeners...');
    
    const addCountryForm = document.getElementById('add-country-form');
    const addTourForm = document.getElementById('add-tour-form');
    const contactForm = document.getElementById('contact-form');
    const settingsForm = document.getElementById('settings-form');
    
    if (addCountryForm) {
        addCountryForm.addEventListener('submit', handleAddCountry);
    }
    
    if (addTourForm) {
        addTourForm.addEventListener('submit', handleAddTour);
    }
    
    if (contactForm) {
        contactForm.addEventListener('submit', handleUpdateContacts);
    }
    
    if (settingsForm) {
        settingsForm.addEventListener('submit', handleUpdateSettings);
    }
    
    // Tab handlers
    const tabButtons = document.querySelectorAll('.tab-button');
    tabButtons.forEach(button => {
        button.addEventListener('click', function() {
            const tabName = this.getAttribute('data-tab');
            console.log('üìë Switching to tab:', tabName);
            
            tabButtons.forEach(btn => btn.classList.remove('active'));
            this.classList.add('active');
            
            document.querySelectorAll('.tab-pane').forEach(pane => {
                pane.classList.remove('active');
            });
            document.getElementById(tabName + '-tab').classList.add('active');
            
            switch(tabName) {
                case 'countries':
                    loadCountriesTable();
                    break;
                case 'tours':
                    loadToursTable();
                    loadCountrySelect();
                    break;
                case 'contacts':
                    loadContactsForm();
                    break;
                case 'settings':
                    loadSettingsForm();
                    break;
            }
        });
    });

    // Add image upload handler
    const imageUpload = document.getElementById('country-image-upload');
    if (imageUpload) {
        imageUpload.addEventListener('change', handleImageUpload);
    }
}

function handleImageUpload(e) {
    const file = e.target.files[0];
    if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
            document.getElementById('country-image-preview').innerHTML = 
                `<img src="${e.target.result}" alt="Preview" style="max-width: 200px; max-height: 150px; border-radius: 8px;">`;
            document.getElementById('country-image-data').value = e.target.result;
        };
        reader.readAsDataURL(file);
    }
}

function loadAdminData() {
    console.log('ÔøΩÔøΩ Loading admin data...');
    
    if (!window.dataManager) {
        console.error('‚ùå DataManager not available');
        showAdminNotification('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –º–µ–Ω–µ–¥–∂–µ—Ä–∞', 'error');
        return;
    }
    
    const data = window.dataManager.getData();
    console.log('üìä Admin loaded data:', {
        countries: data?.countries?.length || 0,
        tours: data ? window.dataManager.getAllTours().length : 0
    });
    
    if (data) {
        loadCountriesTable();
        loadToursTable();
        loadContactsForm();
        loadSettingsForm();
        console.log('‚úÖ Admin data loaded successfully');
    } else {
        showAdminNotification('–î–∞–Ω–Ω—ã–µ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã, —Å–æ–∑–¥–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ', 'warning');
        window.dataManager.ensureDefaultData();
        setTimeout(loadAdminData, 500);
    }
}

function loadCountriesTable() {
    console.log('üåç Loading countries table...');
    
    if (!window.dataManager) return;
    
    const countries = window.dataManager.getCountries();
    const tbody = document.querySelector('#countries-table tbody');
    
    console.log('üìã Countries to display:', countries.length);
    
    if (tbody) {
        if (countries.length > 0) {
            tbody.innerHTML = countries.map(country => `
                <tr>
                    <td>
                        <div style="display: flex; align-items: center; gap: 10px;">
                            ${country.image ? 
                                `<img src="${country.image}" alt="${country.name}" style="width: 50px; height: 40px; object-fit: cover; border-radius: 4px;">` :
                                `<div style="width: 50px; height: 40px; background: #f0f0f0; border-radius: 4px; display: flex; align-items: center; justify-content: center;">
                                    <i class="fas fa-image" style="color: #ccc;"></i>
                                </div>`
                            }
                            <strong>${country.name}</strong>
                        </div>
                    </td>
                    <td>${country.description || '–û–ø–∏—Å–∞–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç'}</td>
                    <td><span class="tour-count-badge">${country.tours ? country.tours.length : 0}</span></td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn-small" onclick="editCountry(${country.id})" title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn-small danger" onclick="deleteCountry(${country.id})" title="–£–¥–∞–ª–∏—Ç—å">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </td>
                </tr>
            `).join('');
            console.log('‚úÖ Countries table loaded');
        } else {
            tbody.innerHTML = '<tr><td colspan="4" style="text-align: center; color: #999; padding: 40px;">–°—Ç—Ä–∞–Ω—ã –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã</td></tr>';
        }
    }
}

function loadToursTable() {
    console.log('üó∫Ô∏è Loading tours table...');
    
    if (!window.dataManager) return;
    
    const allTours = window.dataManager.getAllTours();
    const tbody = document.querySelector('#tours-table tbody');
    
    console.log('üìã Tours to display:', allTours.length);
    
    if (tbody) {
        if (allTours.length > 0) {
            tbody.innerHTML = allTours.map(tour => `
                <tr>
                    <td>
                        <div class="tour-info">
                            <strong>${tour.name}</strong>
                            <small>ID: ${tour.id}</small>
                        </div>
                    </td>
                    <td>
                        <span class="country-badge">${tour.countryName}</span>
                    </td>
                    <td>
                        <span class="price-tag">${tour.price}</span>
                    </td>
                    <td>
                        <span class="duration-badge">${tour.duration}</span>
                    </td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn-small warning" onclick="editTour(${tour.countryId}, ${tour.id})" title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn-small danger" onclick="deleteTour(${tour.countryId}, ${tour.id})" title="–£–¥–∞–ª–∏—Ç—å">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </td>
                </tr>
            `).join('');
            console.log('‚úÖ Tours table loaded');
        } else {
            tbody.innerHTML = `
                <tr>
                    <td colspan="5" style="text-align: center; color: #999; padding: 40px;">
                        <i class="fas fa-map-marked-alt" style="font-size: 3rem; margin-bottom: 15px; display: block; color: #ccc;"></i>
                        <p>–¢—É—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>
                        <small>–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—ã–π —Ç—É—Ä –∏—Å–ø–æ–ª—å–∑—É—è —Ñ–æ—Ä–º—É –≤—ã—à–µ</small>
                    </td>
                </tr>
            `;
        }
    }
}

function loadContactsForm() {
    console.log('üìû Loading contacts form...');
    
    if (!window.dataManager) return;
    
    const contacts = window.dataManager.getContacts();
    const form = document.getElementById('contact-form');
    
    if (form) {
        form.querySelector('#contact-phone').value = contacts.phone || '';
        form.querySelector('#contact-email').value = contacts.email || '';
        form.querySelector('#contact-address').value = contacts.address || '';
        form.querySelector('#contact-hours').value = contacts.hours || '';
        console.log('‚úÖ Contacts form loaded');
    }
}

function loadSettingsForm() {
    console.log('‚öôÔ∏è Loading settings form...');
    
    if (!window.dataManager) return;
    
    const settings = window.dataManager.getSettings();
    const form = document.getElementById('settings-form');
    
    if (form) {
        form.querySelector('#site-title').value = settings.siteTitle || '';
        form.querySelector('#company-name').value = settings.companyName || '';
        console.log('‚úÖ Settings form loaded');
    }
}

function loadCountrySelect() {
    console.log('üåç Loading country select...');
    
    if (!window.dataManager) return;
    
    const countries = window.dataManager.getCountries();
    const select = document.getElementById('tour-country');
    
    if (select) {
        if (countries.length > 0) {
            select.innerHTML = '<option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—Ä–∞–Ω—É --</option>' + 
                countries.map(country => 
                    `<option value="${country.id}">${country.name}</option>`
                ).join('');
            console.log('‚úÖ Country select loaded');
        } else {
            select.innerHTML = '<option value="">–°–Ω–∞—á–∞–ª–∞ –¥–æ–±–∞–≤—å—Ç–µ —Å—Ç—Ä–∞–Ω—ã</option>';
        }
    }
}

// Form handlers
function handleAddCountry(e) {
    e.preventDefault();
    console.log('‚ûï Adding new country...');
    
    const form = e.target;
    const formData = new FormData(form);
    
    const countryData = {
        name: formData.get('name').trim(),
        description: formData.get('description').trim(),
        image: document.getElementById('country-image-data').value || 'https://images.unsplash.com/photo-1488646953014-85cb44e25828?w=400&h=300&fit=crop'
    };
    
    if (!countryData.name) {
        showAdminNotification('–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω—ã', 'error');
        return;
    }
    
    if (!window.dataManager) {
        showAdminNotification('–û—à–∏–±–∫–∞: DataManager –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω', 'error');
        return;
    }
    
    try {
        const result = window.dataManager.addCountry(countryData);
        if (result) {
            form.reset();
            document.getElementById('country-image-preview').innerHTML = 
                '<div style="color: #666; text-align: center; padding: 20px;"><i class="fas fa-image"></i><br>–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –≤—ã–±—Ä–∞–Ω–æ</div>';
            loadCountriesTable();
            loadCountrySelect();
            showAdminNotification(`–°—Ç—Ä–∞–Ω–∞ "${countryData.name}" —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∞!`, 'success');
            console.log('‚úÖ Country added:', countryData.name);
        } else {
            showAdminNotification('–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω—ã', 'error');
        }
    } catch (error) {
        console.error('‚ùå Error adding country:', error);
        showAdminNotification('–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω—ã: ' + error.message, 'error');
    }
}

function handleAddTour(e) {
    e.preventDefault();
    console.log('‚ûï Adding new tour...');
    
    const form = e.target;
    const formData = new FormData(form);
    
    const tourData = {
        name: formData.get('name').trim(),
        price: formData.get('price').trim(),
        duration: formData.get('duration').trim()
    };
    
    const countryId = parseInt(formData.get('country'));
    
    if (!tourData.name || !tourData.price || !tourData.duration || !countryId) {
        showAdminNotification('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è', 'error');
        return;
    }
    
    if (!window.dataManager) {
        showAdminNotification('–û—à–∏–±–∫–∞: DataManager –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω', 'error');
        return;
    }
    
    try {
        const result = window.dataManager.addTour(countryId, tourData);
        if (result) {
            form.reset();
            loadToursTable();
            showAdminNotification(`–¢—É—Ä "${tourData.name}" —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω!`, 'success');
            console.log('‚úÖ Tour added:', tourData.name);
        } else {
            showAdminNotification('–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ç—É—Ä–∞', 'error');
        }
    } catch (error) {
        console.error('‚ùå Error adding tour:', error);
        showAdminNotification('–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ç—É—Ä–∞: ' + error.message, 'error');
    }
}

function handleUpdateContacts(e) {
    e.preventDefault();
    console.log('üìû Updating contacts...');
    
    const form = e.target;
    const formData = new FormData(form);
    
    const contactData = {
        phone: formData.get('phone').trim(),
        email: formData.get('email').trim(),
        address: formData.get('address').trim(),
        hours: formData.get('hours').trim()
    };
    
    if (!window.dataManager) {
        showAdminNotification('–û—à–∏–±–∫–∞: DataManager –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω', 'error');
        return;
    }
    
    try {
        window.dataManager.updateContacts(contactData);
        showAdminNotification('–ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞!', 'success');
        console.log('‚úÖ Contacts updated');
    } catch (error) {
        console.error('‚ùå Error updating contacts:', error);
        showAdminNotification('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤: ' + error.message, 'error');
    }
}

function handleUpdateSettings(e) {
    e.preventDefault();
    console.log('‚öôÔ∏è Updating settings...');
    
    const form = e.target;
    const formData = new FormData(form);
    
    const settingsData = {
        siteTitle: formData.get('siteTitle').trim(),
        companyName: formData.get('companyName').trim()
    };
    
    if (!window.dataManager) {
        showAdminNotification('–û—à–∏–±–∫–∞: DataManager –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω', 'error');
        return;
    }
    
    try {
        window.dataManager.updateSettings(settingsData);
        showAdminNotification('–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∞–π—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω—ã!', 'success');
        console.log('‚úÖ Settings updated');
    } catch (error) {
        console.error('‚ùå Error updating settings:', error);
        showAdminNotification('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫: ' + error.message, 'error');
    }
}

// Country management functions
function editCountry(countryId) {
    console.log('‚úèÔ∏è Editing country:', countryId);
    
    if (!window.dataManager) return;
    
    const countries = window.dataManager.getCountries();
    const country = countries.find(c => c.id === countryId);
    
    if (country) {
        const newName = prompt('–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω—ã:', country.name);
        if (newName === null) return;
        
        const newDesc = prompt('–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ:', country.description || '');
        if (newDesc === null) return;
        
        if (newName.trim()) {
            try {
                // Use the correct method name - updateCountry
                const result = window.dataManager.updateCountry(countryId, {
                    name: newName.trim(),
                    description: newDesc.trim()
                });
                
                if (result) {
                    loadCountriesTable();
                    loadCountrySelect();
                    loadToursTable();
                    showAdminNotification('–°—Ç—Ä–∞–Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞!', 'success');
                    console.log('‚úÖ Country updated');
                } else {
                    showAdminNotification('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω—ã', 'error');
                }
            } catch (error) {
                console.error('‚ùå Error updating country:', error);
                showAdminNotification('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω—ã', 'error');
            }
        } else {
            showAdminNotification('–ù–∞–∑–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω—ã –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º', 'error');
        }
    }
}

function deleteCountry(countryId) {
    console.log('üóëÔ∏è Deleting country:', countryId);
    
    if (!window.dataManager) return;
    
    const countries = window.dataManager.getCountries();
    const country = countries.find(c => c.id === countryId);
    
    if (!country) return;
    
    const tourCount = country.tours ? country.tours.length : 0;
    const message = tourCount > 0 
        ? `–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —Å—Ç—Ä–∞–Ω—É "${country.name}"? –í—Å–µ ${tourCount} —Ç—É—Ä–æ–≤ –≤ —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–µ —Ç–∞–∫–∂–µ –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã.`
        : `–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —Å—Ç—Ä–∞–Ω—É "${country.name}"?`;
    
    if (confirm(message)) {
        try {
            // Use the correct method name - deleteCountry
            const result = window.dataManager.deleteCountry(countryId);
            if (result) {
                loadCountriesTable();
                loadToursTable();
                loadCountrySelect();
                showAdminNotification('–°—Ç—Ä–∞–Ω–∞ —É–¥–∞–ª–µ–Ω–∞!', 'success');
                console.log('‚úÖ Country deleted');
            } else {
                showAdminNotification('–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω—ã', 'error');
            }
        } catch (error) {
            console.error('‚ùå Error deleting country:', error);
            showAdminNotification('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω—ã', 'error');
        }
    }
}

// Tour management functions
function editTour(countryId, tourId) {
    console.log('‚úèÔ∏è Editing tour:', tourId, 'in country:', countryId);
    
    if (!window.dataManager) return;
    
    const allTours = window.dataManager.getAllTours();
    const tour = allTours.find(t => t.id === tourId && t.countryId === countryId);
    
    if (tour) {
        const newName = prompt('–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç—É—Ä–∞:', tour.name);
        if (newName === null) return;
        
        const newPrice = prompt('–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—É—é —Ü–µ–Ω—É:', tour.price);
        if (newPrice === null) return;
        
        const newDuration = prompt('–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—É—é –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:', tour.duration);
        if (newDuration === null) return;
        
        if (newName.trim() && newPrice && newDuration.trim()) {
            try {
                if (window.dataManager.deleteTour(countryId, tourId)) {
                    window.dataManager.addTour(countryId, {
                        name: newName.trim(),
                        price: newPrice.trim(),
                        duration: newDuration.trim()
                    });
                    loadToursTable();
                    showAdminNotification('–¢—É—Ä –æ–±–Ω–æ–≤–ª–µ–Ω!', 'success');
                    console.log('‚úÖ Tour updated');
                }
            } catch (error) {
                console.error('‚ùå Error updating tour:', error);
                showAdminNotification('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç—É—Ä–∞', 'error');
            }
        } else {
            showAdminNotification('–í—Å–µ –ø–æ–ª—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω—ã', 'error');
        }
    }
}

function deleteTour(countryId, tourId) {
    console.log('üóëÔ∏è Deleting tour:', tourId, 'from country:', countryId);
    
    if (!window.dataManager) return;
    
    const allTours = window.dataManager.getAllTours();
    const tour = allTours.find(t => t.id === tourId && t.countryId === countryId);
    
    if (tour && confirm(`–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —Ç—É—Ä "${tour.name}"?`)) {
        try {
            if (window.dataManager.deleteTour(countryId, tourId)) {
                loadToursTable();
                showAdminNotification('–¢—É—Ä —É–¥–∞–ª–µ–Ω!', 'success');
                console.log('‚úÖ Tour deleted');
            } else {
                showAdminNotification('–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Ç—É—Ä–∞', 'error');
            }
        } catch (error) {
            console.error('‚ùå Error deleting tour:', error);
            showAdminNotification('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Ç—É—Ä–∞', 'error');
        }
    }
}

// Notification system
function showAdminNotification(message, type = 'info') {
    console.log(`üì¢ ${type.toUpperCase()}: ${message}`);
    
    document.querySelectorAll('.admin-notification').forEach(n => n.remove());
    
    const notification = document.createElement('div');
    const bgColor = type === 'error' ? '#dc3545' : type === 'warning' ? '#ffc107' : type === 'success' ? '#28a745' : '#007bff';
    const textColor = type === 'warning' ? '#000' : '#fff';
    
    notification.className = 'admin-notification';
    notification.innerHTML = `
        <div style="
            position: fixed;
            top: 20px;
            right: 20px;
            background: ${bgColor};
            color: ${textColor};
            padding: 15px 20px;
            border-radius: 10px;
            z-index: 10000;
            animation: slideInRight 0.3s ease;
            max-width: 400px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 500;
        ">
            <i class="fas fa-${type === 'error' ? 'exclamation-triangle' : type === 'warning' ? 'exclamation-circle' : type === 'success' ? 'check-circle' : 'info-circle'}"></i>
            ${message}
            <button onclick="this.parentElement.parentElement.remove()" style="background: none; border: none; color: inherit; cursor: pointer; margin-left: 10px;">
                <i class="fas fa-times"></i>
            </button>
        </div>
    `;
    
    document.body.appendChild(notification);
    
    setTimeout(() => {
        if (notification.parentElement) {
            notification.remove();
        }
    }, 5000);
}

// Add CSS for notifications
if (!document.querySelector('#admin-notification-styles')) {
    const style = document.createElement('style');
    style.id = 'admin-notification-styles';
    style.textContent = `
        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
    `;
    document.head.appendChild(style);
}

console.log('‚úÖ Admin JS loaded successfully');
            form.reset();
            document.getElementById('country-image-preview').innerHTML = 
                '<div style="color: #666; text-align: center; padding: 20px;"><i class="fas fa-image"></i><br>–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –≤—ã–±—Ä–∞–Ω–æ</div>';
            loadCountriesTable();
            loadCountrySelect();
            showAdminNotification(`–°—Ç—Ä–∞–Ω–∞ "${countryData.name}" —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∞!`, 'success');
            console.log('‚úÖ Country added:', countryData.name);
        } else {
            showAdminNotification('–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω—ã', 'error');
        }
    } catch (error) {
        console.error('‚ùå Error adding country:', error);
        showAdminNotification('–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω—ã: ' + error.message, 'error');
    }
}

function handleAddTour(e) {
    e.preventDefault();
    console.log('‚ûï Adding new tour...');
    
    const form = e.target;
    const formData = new FormData(form);
    
    const tourData = {
        name: formData.get('name').trim(),
        price: formData.get('price').trim(),
        duration: formData.get('duration').trim()
    };
    
    const countryId = parseInt(formData.get('country'));
    
    if (!tourData.name || !tourData.price || !tourData.duration || !countryId) {
        showAdminNotification('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è', 'error');
        return;
    }
    
    if (!window.dataManager) {
        showAdminNotification('–û—à–∏–±–∫–∞: DataManager –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω', 'error');
        return;
    }
    
    try {
        const result = window.dataManager.addTour(countryId, tourData);
        if (result) {
            form.reset();
            loadToursTable();
            showAdminNotification(`–¢—É—Ä "${tourData.name}" —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω!`, 'success');
            console.log('‚úÖ Tour added:', tourData.name);
        } else {
            showAdminNotification('–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ç—É—Ä–∞', 'error');
        }
    } catch (error) {
        console.error('‚ùå Error adding tour:', error);
        showAdminNotification('–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ç—É—Ä–∞: ' + error.message, 'error');
    }
}

function handleUpdateContacts(e) {
    e.preventDefault();
    console.log('üìû Updating contacts...');
    
    const form = e.target;
    const formData = new FormData(form);
    
    const contactData = {
        phone: formData.get('phone').trim(),
        email: formData.get('email').trim(),
        address: formData.get('address').trim(),
        hours: formData.get('hours').trim()
    };
    
    if (!window.dataManager) {
        showAdminNotification('–û—à–∏–±–∫–∞: DataManager –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω', 'error');
        return;
    }
    
    try {
        window.dataManager.updateContacts(contactData);
        showAdminNotification('–ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞!', 'success');
        console.log('‚úÖ Contacts updated');
    } catch (error) {
        console.error('‚ùå Error updating contacts:', error);
        showAdminNotification('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤: ' + error.message, 'error');
    }
}

function handleUpdateSettings(e) {
    e.preventDefault();
    console.log('‚öôÔ∏è Updating settings...');
    
    const form = e.target;
    const formData = new FormData(form);
    
    const settingsData = {
        siteTitle: formData.get('siteTitle').trim(),
        companyName: formData.get('companyName').trim()
    };
    
    if (!window.dataManager) {
        showAdminNotification('–û—à–∏–±–∫–∞: DataManager –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω', 'error');
        return;
    }
    
    try {
        window.dataManager.updateSettings(settingsData);
        showAdminNotification('–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∞–π—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω—ã!', 'success');
        console.log('‚úÖ Settings updated');
    } catch (error) {
        console.error('‚ùå Error updating settings:', error);
        showAdminNotification('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫: ' + error.message, 'error');
    }
}

// Country management functions - FIXED
function editCountry(countryId) {
    console.log('‚úèÔ∏è Editing country:', countryId);
    
    if (!window.dataManager) {
        showAdminNotification('DataManager –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω', 'error');
        return;
    }
    
    const countries = window.dataManager.getCountries();
    const country = countries.find(c => c.id === countryId);
    
    if (country) {
        const newName = prompt('–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω—ã:', country.name);
        if (newName === null) return;
        
        const newDesc = prompt('–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ:', country.description || '');
        if (newDesc === null) return;
        
        if (newName.trim()) {
            try {
                // Use the correct method - updateCountry exists now
                const result = window.dataManager.updateCountry(countryId, {
                    name: newName.trim(),
                    description: newDesc.trim()
                });
                
                if (result) {
                    loadCountriesTable();
                    loadCountrySelect();
                    loadToursTable();
                    showAdminNotification('–°—Ç—Ä–∞–Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞!', 'success');
                    console.log('‚úÖ Country updated');
                } else {
                    showAdminNotification('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω—ã', 'error');
                }
            } catch (error) {
                console.error('‚ùå Error updating country:', error);
                showAdminNotification('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω—ã: ' + error.message, 'error');
            }
        } else {
            showAdminNotification('–ù–∞–∑–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω—ã –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º', 'error');
        }
    }
}

function deleteCountry(countryId) {
    console.log('üóëÔ∏è Deleting country:', countryId);
    
    if (!window.dataManager) {
        showAdminNotification('DataManager –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω', 'error');
        return;
    }
    
    const countries = window.dataManager.getCountries();
    const country = countries.find(c => c.id === countryId);
    
    if (!country) {
        showAdminNotification('–°—Ç—Ä–∞–Ω–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞', 'error');
        return;
    }
    
    const tourCount = country.tours ? country.tours.length : 0;
    const message = tourCount > 0 
        ? `–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —Å—Ç—Ä–∞–Ω—É "${country.name}"? –í—Å–µ ${tourCount} —Ç—É—Ä–æ–≤ –≤ —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–µ —Ç–∞–∫–∂–µ –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã.`
        : `–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —Å—Ç—Ä–∞–Ω—É "${country.name}"?`;
    
    if (confirm(message)) {
        try {
            // Use the correct method - deleteCountry exists now
            const result = window.dataManager.deleteCountry(countryId);
            if (result) {
                loadCountriesTable();
                loadToursTable();
                loadCountrySelect();
                showAdminNotification('–°—Ç—Ä–∞–Ω–∞ —É–¥–∞–ª–µ–Ω–∞!', 'success');
                console.log('‚úÖ Country deleted');
            } else {
                showAdminNotification('–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω—ã', 'error');
            }
        } catch (error) {
            console.error('‚ùå Error deleting country:', error);
            showAdminNotification('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω—ã: ' + error.message, 'error');
        }
    }
}

// Tour management functions
function editTour(countryId, tourId) {
    console.log('‚úèÔ∏è Editing tour:', tourId, 'in country:', countryId);
    
    if (!window.dataManager) return;
    
    const allTours = window.dataManager.getAllTours();
    const tour = allTours.find(t => t.id === tourId && t.countryId === countryId);
    
    if (tour) {
        const newName = prompt('–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç—É—Ä–∞:', tour.name);
        if (newName === null) return;
        
        const newPrice = prompt('–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—É—é —Ü–µ–Ω—É:', tour.price);
        if (newPrice === null) return;
        
        const newDuration = prompt('–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—É—é –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:', tour.duration);
        if (newDuration === null) return;
        
        if (newName.trim() && newPrice && newDuration.trim()) {
            try {
                if (window.dataManager.deleteTour(countryId, tourId)) {
                    window.dataManager.addTour(countryId, {
                        name: newName.trim(),
                        price: newPrice.trim(),
                        duration: newDuration.trim()
                    });
                    loadToursTable();
                    showAdminNotification('–¢—É—Ä –æ–±–Ω–æ–≤–ª–µ–Ω!', 'success');
                    console.log('‚úÖ Tour updated');
                }
            } catch (error) {
                console.error('‚ùå Error updating tour:', error);
                showAdminNotification('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç—É—Ä–∞', 'error');
            }
        } else {
            showAdminNotification('–í—Å–µ –ø–æ–ª—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω—ã', 'error');
        }
    }
}

function deleteTour(countryId, tourId) {
    console.log('ÔøΩÔøΩÔ∏è Deleting tour:', tourId, 'from country:', countryId);
    
    if (!window.dataManager) return;
    
    const allTours = window.dataManager.getAllTours();
    const tour = allTours.find(t => t.id === tourId && t.countryId === countryId);
    
    if (tour && confirm(`–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —Ç—É—Ä "${tour.name}"?`)) {
        try {
            if (window.dataManager.deleteTour(countryId, tourId)) {
                loadToursTable();
                showAdminNotification('–¢—É—Ä —É–¥–∞–ª–µ–Ω!', 'success');
                console.log('‚úÖ Tour deleted');
            } else {
                showAdminNotification('–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Ç—É—Ä–∞', 'error');
            }
        } catch (error) {
            console.error('‚ùå Error deleting tour:', error);
            showAdminNotification('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Ç—É—Ä–∞', 'error');
        }
    }
}

// Notification system
function showAdminNotification(message, type = 'info') {
    console.log(`üì¢ ${type.toUpperCase()}: ${message}`);
    
    document.querySelectorAll('.admin-notification').forEach(n => n.remove());
    
    const notification = document.createElement('div');
    const bgColor = type === 'error' ? '#dc3545' : type === 'warning' ? '#ffc107' : type === 'success' ? '#28a745' : '#007bff';
    const textColor = type === 'warning' ? '#000' : '#fff';
    
    notification.className = 'admin-notification';
    notification.innerHTML = \`
        <div style="
            position: fixed;
            top: 20px;
            right: 20px;
            background: \${bgColor};
            color: \${textColor};
            padding: 15px 20px;
            border-radius: 10px;
            z-index: 10000;
            animation: slideInRight 0.3s ease;
            max-width: 400px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 500;
        ">
            <i class="fas fa-\${type === 'error' ? 'exclamation-triangle' : type === 'warning' ? 'exclamation-circle' : type === 'success' ? 'check-circle' : 'info-circle'}"></i>
            \${message}
            <button onclick="this.parentElement.parentElement.remove()" style="background: none; border: none; color: inherit; cursor: pointer; margin-left: 10px;">
                <i class="fas fa-times"></i>
            </button>
        </div>
    \`;
    
    document.body.appendChild(notification);
    
    setTimeout(() => {
        if (notification.parentElement) {
            notification.remove();
        }
    }, 5000);
}

// Add CSS for notifications
if (!document.querySelector('#admin-notification-styles')) {
    const style = document.createElement('style');
    style.id = 'admin-notification-styles';
    style.textContent = \`
        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
    \`;
    document.head.appendChild(style);
}

console.log('‚úÖ Admin JS loaded successfully');



=== FILE: ./init-page-data.js ===
// Initialize page data structure if needed
(function() {
    'use strict';
    
    console.log('üîß Initializing page data structure...');
    
    const initData = () => {
        if (window.dataManager) {
            const data = window.dataManager.getData();
            if (!data) return;
            
            if (!data.content) {
                data.content = {};
            }
            
            // Ensure all sections have basic structure
            const sections = ['hero', 'about', 'services', 'destinations', 'contact'];
            sections.forEach(section => {
                if (!data.content[section]) {
                    data.content[section] = {};
                }
            });
            
            // Ensure services have services array
            if (data.content.services && !data.content.services.services) {
                data.content.services.services = [];
            }
            
            // Ensure about has stats array
            if (data.content.about && !data.content.about.stats) {
                data.content.about.stats = [];
            }
            
            console.log('‚úÖ Page data structure initialized');
        } else {
            setTimeout(initData, 100);
        }
    };
    
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initData);
    } else {
        initData();
    }
})();



=== FILE: ./admin-login.html ===
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Login - WorldTravel</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .login-container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            width: 100%;
            max-width: 400px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .login-box h2 {
            color: white;
            text-align: center;
            margin-bottom: 30px;
            font-size: 28px;
        }

        .user-box {
            position: relative;
            margin-bottom: 30px;
        }

        .user-box input {
            width: 100%;
            padding: 10px 0;
            font-size: 16px;
            color: white;
            margin-bottom: 30px;
            border: none;
            border-bottom: 1px solid white;
            outline: none;
            background: transparent;
        }

        .user-box label {
            position: absolute;
            top: 0;
            left: 0;
            padding: 10px 0;
            font-size: 16px;
            color: white;
            pointer-events: none;
            transition: 0.5s;
        }

        .user-box input:focus ~ label,
        .user-box input:valid ~ label {
            top: -20px;
            left: 0;
            color: #03e9f4;
            font-size: 12px;
        }

        button {
            background: transparent;
            border: 1px solid white;
            color: white;
            padding: 12px 30px;
            text-transform: uppercase;
            letter-spacing: 2px;
            border-radius: 25px;
            cursor: pointer;
            transition: 0.5s;
            width: 100%;
            font-size: 16px;
            margin-top: 20px;
        }

        button:hover {
            background: white;
            color: #667eea;
        }

        .message {
            padding: 15px;
            margin: 20px 0;
            border-radius: 8px;
            text-align: center;
            font-weight: bold;
        }

        .message.success {
            background: rgba(46, 204, 113, 0.2);
            color: #2ecc71;
            border: 1px solid #2ecc71;
        }

        .message.error {
            background: rgba(231, 76, 60, 0.2);
            color: #e74c3c;
            border: 1px solid #e74c3c;
        }

        .code-inputs {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
        }

        .code-inputs input {
            width: 45px;
            height: 45px;
            text-align: center;
            font-size: 20px;
            border: 2px solid white;
            background: transparent;
            color: white;
            border-radius: 8px;
        }

        .hidden {
            display: none;
        }

        .loading {
            opacity: 0.7;
            pointer-events: none;
        }
    </style>
</head>
<body>
    <div class="login-container">
        <div class="login-box">
            <h2>Admin Login</h2>
            
            <div id="loginSection">
                <div class="user-box">
                    <input type="text" id="username" required>
                    <label>–õ–æ–≥–∏–Ω</label>
                </div>
                <div class="user-box">
                    <input type="password" id="password" required>
                    <label>–ü–∞—Ä–æ–ª—å</label>
                </div>
                <button type="button" onclick="handleLogin()">–í–æ–π—Ç–∏</button>
            </div>

            <div id="codeSection" class="hidden">
                <div class="message info">
                    –ö–æ–¥ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ –≤–∞—à—É –ø–æ—á—Ç—É narekgrigoryan424@gmail.com
                </div>
                <div class="code-inputs">
                    <input type="text" maxlength="1" oninput="moveToNext(this, 1)">
                    <input type="text" maxlength="1" oninput="moveToNext(this, 2)">
                    <input type="text" maxlength="1" oninput="moveToNext(this, 3)">
                    <input type="text" maxlength="1" oninput="moveToNext(this, 4)">
                    <input type="text" maxlength="1" oninput="moveToNext(this, 5)">
                    <input type="text" maxlength="1" oninput="moveToNext(this, 6)">
                </div>
                <button type="button" onclick="verifyCode()">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∫–æ–¥</button>
                <button type="button" onclick="goBackToLogin()" style="background: transparent; margin-top: 10px;">–ù–∞–∑–∞–¥</button>
            </div>

            <div id="message" class="message"></div>
        </div>
    </div>

    <script>
   let currentAuthCode = '';
let currentUsername = '';

async function handleLogin() {
    const username = document.getElementById('username').value;
    const password = document.getElementById('password').value;

    if (username !== 'admin' || password !== 'admin') {
        showMessage('–ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å', 'error');
        return;
    }

    showMessage('–û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–¥–∞ –Ω–∞ –≤–∞—à—É –ø–æ—á—Ç—É...', 'success');
    setLoadingState(true);

    try {
        currentAuthCode = Math.floor(100000 + Math.random() * 900000).toString();
        currentUsername = username;
        
        console.log('üîê GENERATED CODE:', currentAuthCode);

        // –í–†–ï–ú–ï–ù–ù–û –ü–†–û–ü–£–°–ö–ê–ï–ú –û–¢–ü–†–ê–í–ö–£ EMAIL - –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ—Å—Ç–æ–≤—ã–π –∫–æ–¥
        console.log('üìß Email sending skipped for testing');
        
        showMessage('‚úÖ –ö–æ–¥ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω! –¢–µ—Å—Ç–æ–≤—ã–π –∫–æ–¥: ' + currentAuthCode, 'success');
        document.getElementById('loginSection').classList.add('hidden');
        document.getElementById('codeSection').classList.remove('hidden');
        clearCodeInputs();
        document.querySelector('.code-inputs input').focus();
        
    } catch (error) {
        console.error('Error:', error);
        showMessage('‚ùå –û—à–∏–±–∫–∞', 'error');
    } finally {
        setLoadingState(false);
    }
}

function moveToNext(input, nextIndex) {
    const inputs = document.querySelectorAll('.code-inputs input');
    
    if (input.value.length === 1 && nextIndex < inputs.length) {
        inputs[nextIndex].focus();
    }
    
    const allFilled = Array.from(inputs).every(input => input.value.length === 1);
    if (allFilled) {
        verifyCode();
    }
}

function verifyCode() {
    const inputs = document.querySelectorAll('.code-inputs input');
    const enteredCode = Array.from(inputs).map(input => input.value).join('');
    
    if (enteredCode.length !== 6) {
        showMessage('–í–≤–µ–¥–∏—Ç–µ –≤—Å–µ 6 —Ü–∏—Ñ—Ä –∫–æ–¥–∞', 'error');
        return;
    }

    setLoadingState(true);

    setTimeout(() => {
        if (enteredCode === currentAuthCode) {
            showMessage('‚úÖ –£—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥! –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ...', 'success');
            
            // –°–û–•–†–ê–ù–Ø–ï–ú –í SessionStorage (—Ä–∞–±–æ—Ç–∞–µ—Ç –ª—É—á—à–µ)
            sessionStorage.setItem('adminAuthenticated', 'true');
            sessionStorage.setItem('adminUsername', currentUsername);
            sessionStorage.setItem('authTime', Date.now().toString());
            
            // –î–£–ë–õ–ò–†–£–ï–ú –í LocalStorage
            localStorage.setItem('adminAuthenticated', 'true');
            localStorage.setItem('adminUsername', currentUsername);
            localStorage.setItem('authTime', Date.now().toString());
            
            console.log('üíæ SAVED TO STORAGE:');
            console.log('SessionStorage:', {
                auth: sessionStorage.getItem('adminAuthenticated'),
                user: sessionStorage.getItem('adminUsername')
            });
            console.log('LocalStorage:', {
                auth: localStorage.getItem('adminAuthenticated'),
                user: localStorage.getItem('adminUsername')
            });
            
            // –ü–ï–†–ï–ù–ê–ü–†–ê–í–õ–Ø–ï–ú –°–†–ê–ó–£
            console.log('üîÑ REDIRECTING TO ADMIN.HTML');
            window.location.href = 'admin.html';
            
        } else {
            showMessage('‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.', 'error');
            shakeCodeInputs();
        }
        setLoadingState(false);
    }, 500);
}

function goBackToLogin() {
    document.getElementById('codeSection').classList.add('hidden');
    document.getElementById('loginSection').classList.remove('hidden');
    showMessage('', '');
    currentAuthCode = '';
}

function clearCodeInputs() {
    const inputs = document.querySelectorAll('.code-inputs input');
    inputs.forEach(input => input.value = '');
}

function shakeCodeInputs() {
    const container = document.querySelector('.code-inputs');
    container.style.animation = 'shake 0.5s';
    setTimeout(() => {
        container.style.animation = '';
        clearCodeInputs();
        document.querySelector('.code-inputs input').focus();
    }, 500);
}

function setLoadingState(loading) {
    const buttons = document.querySelectorAll('button');
    buttons.forEach(button => {
        button.disabled = loading;
        button.classList.toggle('loading', loading);
    });
}

function showMessage(text, type) {
    const messageEl = document.getElementById('message');
    messageEl.textContent = text;
    messageEl.className = 'message';
    if (type) {
        messageEl.classList.add(type);
    }
}

// –ê–Ω–∏–º–∞—Ü–∏—è —Ç—Ä—è—Å–∫–∏
const style = document.createElement('style');
style.textContent = `
    @keyframes shake {
        0%, 100% { transform: translateX(0); }
        25% { transform: translateX(-5px); }
        75% { transform: translateX(5px); }
    }
`;
document.head.appendChild(style);

// –ê–≤—Ç–æ—Ñ–æ–∫—É—Å
document.addEventListener('DOMContentLoaded', function() {
    document.getElementById('username').focus();
});

// –û–±—Ä–∞–±–æ—Ç–∫–∞ Enter
document.addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
        if (!document.getElementById('codeSection').classList.contains('hidden')) {
            verifyCode();
        } else {
            handleLogin();
        }
    }
});
    </script>
</body>
</html>



=== FILE: ./index.html ===
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WorldTravel - –¢—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–º–ø–∞–Ω–∏—è</title>
    <link rel="stylesheet" href="style.css?v=8">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Preload critical resources -->
    <link rel="preload" href="data-manager.js" as="script">
    <link rel="preload" href="script.js" as="script">
    <link rel="preload" href="images/travel-placeholder.svg" as="image">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <nav class="nav">
            <div class="logo">
                <h2><i class="fas fa-globe-americas"></i> WorldTravel</h2>
            </div>
            <ul class="nav-links">
                <li><a href="#home">–ì–ª–∞–≤–Ω–∞—è</a></li>
                <li><a href="#about">–û –Ω–∞—Å</a></li>
                <li><a href="#services">–£—Å–ª—É–≥–∏</a></li>
                <li><a href="#destinations">–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è</a></li>
                <li><a href="#contact">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a></li>
                <li>
                    <a href="admin-login.html" class="admin-link"><i class="fas fa-cog"></i> –ê–¥–º–∏–Ω–∫–∞</a>
                </li>
            </ul>
            <div class="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </nav>
    </header>

    <!-- Hero Section -->
    <section id="home" class="hero">
        <div class="hero-content">
            <h1 class="animate-fade-in">–û—Ç–∫—Ä–æ–π—Ç–µ –º–∏—Ä —Å WorldTravel</h1>
            <p class="animate-fade-in-delay">–ú—ã —Å–æ–∑–¥–∞–µ–º –Ω–µ–∑–∞–±—ã–≤–∞–µ–º—ã–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è –ø–æ –≤—Å–µ–º—É –º–∏—Ä—É. –û—Ç —ç–∫–∑–æ—Ç–∏—á–µ—Å–∫–∏—Ö –ø–ª—è–∂–µ–π –¥–æ –≥–æ—Ä–Ω—ã—Ö –≤–µ—Ä—à–∏–Ω - –≤–∞—à–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –∑–¥–µ—Å—å.</p>
            <button class="cta-button animate-bounce" onclick="scrollToDestinations()">–ù–∞—á–∞—Ç—å –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ</button>
        </div>
        <div class="hero-image">
            <div class="floating-element element-1"><i class="fas fa-plane"></i></div>
            <div class="floating-element element-2"><i class="fas fa-map-marked-alt"></i></div>
            <div class="floating-element element-3"><i class="fas fa-passport"></i></div>
            <div class="image-placeholder pulse-animation">
                <img src="images/travel-placeholder.svg" alt="–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è" class="hero-img" loading="lazy">
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="about">
        <div class="container">
            <h2 class="section-title">–û –Ω–∞—Å</h2>
            <div class="about-content">
                <div class="about-text">
                    <p>WorldTravel - —ç—Ç–æ –∫–æ–º–∞–Ω–¥–∞ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –ø—É—Ç–µ—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫–æ–≤ –∏ —ç–∫—Å–ø–µ—Ä—Ç–æ–≤ –ø–æ —Ç—É—Ä–∏–∑–º—É —Å –±–æ–ª–µ–µ —á–µ–º 10-–ª–µ—Ç–Ω–∏–º –æ–ø—ã—Ç–æ–º —Ä–∞–±–æ—Ç—ã. –ú—ã —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º—Å—è –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–∏ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ –∏ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö travel-—Ä–µ—à–µ–Ω–∏–π.</p>
                    <div class="stats">
                        <div class="stat animate-counter" data-target="5000">
                            <h3>5000</h3>
                            <p>–î–æ–≤–æ–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤</p>
                        </div>
                        <div class="stat animate-counter" data-target="50">
                            <h3>50</h3>
                            <p>–°—Ç—Ä–∞–Ω –º–∏—Ä–∞</p>
                        </div>
                        <div class="stat">
                            <h3>10 –ª–µ—Ç</h3>
                            <p>–û–ø—ã—Ç–∞ —Ä–∞–±–æ—Ç—ã</p>
                        </div>
                    </div>
                </div>
                <div class="about-image">
                    <div class="image-placeholder rotate-animation">
                        <img src="images/travel-placeholder.svg" alt="–ö–æ–º–∞–Ω–¥–∞ WorldTravel" class="about-img" loading="lazy">
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Services Section -->
    <section id="services" class="services">
        <div class="container">
            <h2 class="section-title">–£—Å–ª—É–≥–∏</h2>
            <div class="services-grid">
                <div class="service-card slide-in-left">
                    <div class="service-icon"><i class="fas fa-plane"></i></div>
                    <h3>–ê–≤–∏–∞–±–∏–ª–µ—Ç—ã</h3>
                    <p>–ü–æ–¥–±–æ—Ä –∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ª—É—á—à–∏—Ö –∞–≤–∏–∞–ø–µ—Ä–µ–ª–µ—Ç–æ–≤ –ø–æ –≤—ã–≥–æ–¥–Ω—ã–º —Ü–µ–Ω–∞–º</p>
                </div>
                <div class="service-card slide-in-bottom">
                    <div class="service-icon"><i class="fas fa-hotel"></i></div>
                    <h3>–û—Ç–µ–ª–∏</h3>
                    <p>–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–µ–ª–µ–π –ª—é–±–æ–≥–æ —É—Ä–æ–≤–Ω—è –∫–æ–º—Ñ–æ—Ä—Ç–∞ –ø–æ –≤—Å–µ–º—É –º–∏—Ä—É</p>
                </div>
                <div class="service-card slide-in-right">
                    <div class="service-icon"><i class="fas fa-map-marked-alt"></i></div>
                    <h3>–¢—É—Ä—ã</h3>
                    <p>–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –∏ –≥—Ä—É–ø–ø–æ–≤—ã–µ —Ç—É—Ä—ã —Å –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–º–∏ –≥–∏–¥–∞–º–∏</p>
                </div>
                <div class="service-card slide-in-top">
                    <div class="service-icon"><i class="fas fa-shield-alt"></i></div>
                    <h3>–°—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ</h3>
                    <p>–ü–æ–ª–Ω–æ–µ —Å—Ç—Ä–∞—Ö–æ–≤–æ–µ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ –≤–∞—à–µ–≥–æ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Destinations Section -->
    <section id="destinations" class="destinations">
        <div class="container">
            <h2 class="section-title">–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è</h2>
            <p class="section-subtitle">–û—Ç–∫—Ä–æ–π—Ç–µ –¥–ª—è —Å–µ–±—è –ª—É—á—à–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–∏—Ä–∞ —Å –Ω–∞—à–∏–º–∏ —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–º–∏ —Ç—É—Ä–∞–º–∏</p>
            
            <div class="search-box">
                <input type="text" class="search-input" placeholder="üîç –ü–æ–∏—Å–∫ —Å—Ç—Ä–∞–Ω –∏–ª–∏ —Ç—É—Ä–æ–≤...">
            </div>

            <div class="loading-message" id="destinations-loading">
                <i class="fas fa-spinner fa-spin"></i> –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è...
            </div>
            <div class="destinations-grid" id="destinations-grid">
                <!-- –°—Ç—Ä–∞–Ω—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ JavaScript -->
            </div>
            <div class="error-message" id="destinations-error" style="display: none;">
                <i class="fas fa-exclamation-triangle"></i> –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="contact">
        <div class="container">
            <h2 class="section-title">–ö–æ–Ω—Ç–∞–∫—Ç—ã</h2>
            <div class="contact-content">
                <div class="contact-info">
                    <h3>–ù–∞—à–∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã</h3>
                    <div class="contact-item">
                        <i class="fas fa-phone"></i>
                        <div>
                            <strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong>
                            <p class="contact-phone">+7 (999) 123-45-67</p>
                        </div>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-envelope"></i>
                        <div>
                            <strong>Email:</strong>
                            <p class="contact-email">info@worldtravel.com</p>
                        </div>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-map-marker-alt"></i>
                        <div>
                            <strong>–ê–¥—Ä–µ—Å:</strong>
                            <p class="contact-address">–ú–æ—Å–∫–≤–∞, —É–ª. –¢—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∞—è, 15</p>
                        </div>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-clock"></i>
                        <div>
                            <strong>–ß–∞—Å—ã —Ä–∞–±–æ—Ç—ã:</strong>
                            <p class="contact-hours">–ü–Ω-–ü—Ç: 9:00-18:00</p>
                        </div>
                    </div>
                </div>
                <form class="contact-form">
                    <input type="text" placeholder="–í–∞—à–µ –∏–º—è" required>
                    <input type="email" placeholder="–í–∞—à email" required>
                    <input type="tel" placeholder="–í–∞—à —Ç–µ–ª–µ—Ñ–æ–Ω">
                    <textarea placeholder="–í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ" rows="5" required></textarea>
                    <button type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ</button>
                </form>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3><i class="fas fa-globe-americas"></i> WorldTravel</h3>
                    <p class="footer-description">–í–∞—à –Ω–∞–¥–µ–∂–Ω—ã–π –ø–∞—Ä—Ç–Ω–µ—Ä –≤ –º–∏—Ä–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π.</p>
                </div>
                <div class="footer-section">
                    <h4>–ë—ã—Å—Ç—Ä—ã–µ —Å—Å—ã–ª–∫–∏</h4>
                    <ul>
                        <li><a href="#home">–ì–ª–∞–≤–Ω–∞—è</a></li>
                        <li><a href="#about">–û –Ω–∞—Å</a></li>
                        <li><a href="#services">–£—Å–ª—É–≥–∏</a></li>
                        <li><a href="#destinations">–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è</a></li>
                        <li><a href="#contact">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h4>
                    <p class="footer-phone"><i class="fas fa-phone"></i> +7 (999) 123-45-67</p>
                    <p class="footer-email"><i class="fas fa-envelope"></i> info@worldtravel.com</p>
                    <p class="footer-address"><i class="fas fa-map-marker-alt"></i> –ú–æ—Å–∫–≤–∞, —É–ª. –¢—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∞—è, 15</p>
                    <p class="footer-hours"><i class="fas fa-clock"></i> –ü–Ω-–ü—Ç: 9:00-18:00</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p class="footer-copyright">&copy; 2024 WorldTravel. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
            </div>
        </div>
    </footer>

    <!-- Scripts with proper order and error handling -->
    <script src="data-manager.js"></script>
    <script src="content-sync.js"></script>
    <script src="script.js"></script>
    
    <!-- Debug script - comment out for production -->
    <!-- <script src="debug-404.js"></script> -->
</body>
</html>



=== FILE: ./universal-editor.css ===
/* Universal Editor Styles */
.universal-editor-section {
    background: white;
    border-radius: 12px;
    padding: 25px;
    margin-bottom: 20px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}

.editor-header {
    border-bottom: 2px solid #e9ecef;
    padding-bottom: 15px;
    margin-bottom: 25px;
}

.editor-header h3 {
    color: #2c5aa0;
    margin-bottom: 5px;
    font-size: 1.4em;
}

.editor-header p {
    color: #6c757d;
    margin: 0;
}

.image-manager {
    background: #f8f9fa;
    padding: 20px;
    border-radius: 8px;
    margin-bottom: 20px;
    border: 2px dashed #dee2e6;
}

.image-preview {
    width: 100%;
    max-width: 400px;
    height: 200px;
    border: 2px solid #e9ecef;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 15px;
    overflow: hidden;
    background: white;
}

.image-preview img {
    max-width: 100%;
    max-height: 100%;
    object-fit: cover;
}

.no-image {
    text-align: center;
    color: #6c757d;
}

.no-image i {
    font-size: 3em;
    margin-bottom: 10px;
    display: block;
    color: #ced4da;
}

.image-actions {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
}

.stats-management,
.services-management,
.contacts-management {
    background: #f8f9fa;
    padding: 20px;
    border-radius: 8px;
    margin: 20px 0;
    border-left: 4px solid #2c5aa0;
}

.section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
}

.section-header h4 {
    color: #2c5aa0;
    margin: 0;
}

.stats-list,
.services-list {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.stat-item,
.service-item {
    background: white;
    padding: 15px;
    border-radius: 8px;
    border: 1px solid #e9ecef;
    transition: all 0.3s ease;
}

.stat-item:hover,
.service-item:hover {
    border-color: #2c5aa0;
    box-shadow: 0 2px 8px rgba(44, 90, 160, 0.1);
}

.stat-inputs {
    display: grid;
    grid-template-columns: 1fr 1fr auto;
    gap: 10px;
    align-items: center;
}

.service-header {
    display: grid;
    grid-template-columns: 1fr 1fr auto;
    gap: 10px;
    align-items: center;
    margin-bottom: 10px;
}

.service-item textarea {
    margin-bottom: 10px;
}

.icon-preview {
    background: #e9ecef;
    padding: 8px 12px;
    border-radius: 4px;
    font-size: 0.9em;
    color: #495057;
}

.icon-preview i {
    margin-right: 8px;
    color: #2c5aa0;
}

.empty-state {
    text-align: center;
    padding: 40px 20px;
    color: #6c757d;
}

.empty-state i {
    font-size: 3em;
    margin-bottom: 15px;
    display: block;
    color: #ced4da;
}

.editor-actions {
    border-top: 2px solid #e9ecef;
    padding-top: 20px;
    margin-top: 25px;
    text-align: center;
}

.content-sections {
    margin: 20px 0;
}

.section-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 15px;
    margin-top: 15px;
}

.section-card {
    background: white;
    border: 2px solid #e9ecef;
    border-radius: 8px;
    padding: 20px;
    text-align: center;
    cursor: pointer;
    transition: all 0.3s ease;
}

.section-card:hover {
    border-color: #2c5aa0;
    background: #f8f9fa;
    transform: translateY(-2px);
}

.section-card i {
    font-size: 2em;
    color: #2c5aa0;
    margin-bottom: 10px;
    display: block;
}

.section-card h4 {
    margin: 0 0 8px 0;
    color: #2c5aa0;
    font-size: 1.1em;
}

.section-card p {
    margin: 0;
    color: #6c757d;
    font-size: 0.9em;
}

/* Button Styles */
.btn {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 10px 20px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 14px;
    font-weight: 500;
    text-decoration: none;
    transition: all 0.3s ease;
    line-height: 1;
}

.btn-primary {
    background: #2c5aa0;
    color: white;
}

.btn-primary:hover {
    background: #1e3d72;
}

.btn-secondary {
    background: #6c757d;
    color: white;
}

.btn-secondary:hover {
    background: #545b62;
}

.btn-success {
    background: #28a745;
    color: white;
}

.btn-success:hover {
    background: #218838;
}

.btn-danger {
    background: #dc3545;
    color: white;
}

.btn-danger:hover {
    background: #c82333;
}

.btn-sm {
    padding: 6px 12px;
    font-size: 12px;
}

/* Form Styles */
.form-group {
    margin-bottom: 20px;
}

.form-group label {
    display: block;
    margin-bottom: 8px;
    font-weight: 600;
    color: #495057;
}

.form-control {
    width: 100%;
    padding: 12px 15px;
    border: 2px solid #e9ecef;
    border-radius: 6px;
    font-size: 14px;
    transition: border-color 0.3s ease;
    box-sizing: border-box;
}

.form-control:focus {
    outline: none;
    border-color: #2c5aa0;
    box-shadow: 0 0 0 3px rgba(44, 90, 160, 0.1);
}

/* Responsive Design */
@media (max-width: 768px) {
    .universal-editor-section {
        padding: 15px;
        margin-bottom: 15px;
    }
    
    .stat-inputs,
    .service-header {
        grid-template-columns: 1fr;
        gap: 10px;
    }
    
    .image-actions {
        flex-direction: column;
    }
    
    .section-header {
        flex-direction: column;
        gap: 10px;
        align-items: stretch;
    }
    
    .section-grid {
        grid-template-columns: 1fr;
    }
}

/* Animation for smooth transitions */
.universal-editor-section {
    animation: fadeIn 0.3s ease;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}



=== FILE: ./super-admin.html ===
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WorldTravel - –ü–æ–ª–Ω–∞—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</title>
    <style>
        :root {
            --primary: #2c5aa0;
            --primary-dark: #1e3d72;
            --secondary: #4a7bc8;
            --success: #28a745;
            --warning: #ffc107;
            --danger: #dc3545;
            --light: #f8f9fa;
            --dark: #343a40;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f7fb;
            color: #333;
            line-height: 1.6;
        }

        .admin-layout {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            width: 280px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
        }

        .sidebar-header {
            padding: 2rem 1.5rem;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .sidebar-header h1 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .sidebar-nav {
            padding: 1rem 0;
        }

        .nav-item {
            padding: 1rem 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .nav-item:hover, .nav-item.active {
            background: rgba(255,255,255,0.1);
            border-left-color: white;
        }

        .nav-item i {
            width: 20px;
            text-align: center;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .top-header {
            background: white;
            padding: 1rem 2rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .content-area {
            padding: 2rem;
            flex: 1;
            overflow-y: auto;
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            text-align: center;
            transition: transform 0.3s ease;
            border-left: 4px solid var(--primary);
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-card h3 {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }

        /* Content Sections */
        .content-section {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--light);
        }

        /* Buttons */
        .btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        .btn-success {
            background: var(--success);
        }

        .btn-success:hover {
            background: #218838;
        }

        .btn-warning {
            background: var(--warning);
            color: var(--dark);
        }

        .btn-warning:hover {
            background: #e0a800;
        }

        .btn-danger {
            background: var(--danger);
        }

        .btn-danger:hover {
            background: #c82333;
        }

        /* Tables */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }

        .data-table th,
        .data-table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid #e1e5ee;
        }

        .data-table th {
            background: var(--light);
            font-weight: 600;
            color: var(--dark);
        }

        .data-table tr:hover {
            background: #f8f9fa;
        }

        /* Forms */
        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--dark);
        }

        .form-control {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 2px solid #e1e5ee;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
        }

        /* Tabs */
        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Cards */
        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        .card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            overflow: hidden;
            transition: transform 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        .card-header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 1.5rem;
        }

        .card-body {
            padding: 1.5rem;
        }

        .card-actions {
            padding: 1rem 1.5rem;
            background: var(--light);
            display: flex;
            gap: 0.5rem;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--light);
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--dark);
        }

        .form-actions {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
            margin-top: 2rem;
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            gap: 1rem;
            z-index: 10000;
            transform: translateX(400px);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            border-left: 4px solid var(--success);
            background: #d4edda;
            color: #155724;
        }

        .notification.error {
            border-left: 4px solid var(--danger);
            background: #f8d7da;
            color: #721c24;
        }

        .notification-close {
            background: none;
            border: none;
            font-size: 1.2rem;
            cursor: pointer;
        }

        /* Tour Card */
        .tour-card {
            background: white;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            border-left: 4px solid var(--success);
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .tour-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 1rem;
        }

        .tour-country {
            background: var(--primary);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="admin-layout">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1><i class="fas fa-globe-americas"></i> WorldTravel</h1>
                <p>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</p>
            </div>
            <nav class="sidebar-nav">
                <div class="nav-item active" data-tab="dashboard">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>–î–∞—à–±–æ—Ä–¥</span>
                </div>
                <div class="nav-item" data-tab="countries">
                    <i class="fas fa-globe"></i>
                    <span>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∞–º–∏</span>
                </div>
                <div class="nav-item" data-tab="tours">
                    <i class="fas fa-map-marked-alt"></i>
                    <span>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—É—Ä–∞–º–∏</span>
                </div>
                <div class="nav-item" data-tab="content">
                    <i class="fas fa-edit"></i>
                    <span>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞</span>
                </div>
                <div class="nav-item" data-tab="settings">
                    <i class="fas fa-cog"></i>
                    <span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã</span>
                </div>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="top-header">
    <div style="display: flex; align-items: center; gap: 1rem;">
        <h2 id="page-title">–î–∞—à–±–æ—Ä–¥</h2>
        <button class="btn" onclick="window.open('/', '_blank')" 
                style="background: #17a2b8; font-size: 0.8rem; padding: 0.5rem 1rem;">
            <i class="fas fa-home"></i> –ù–∞ –≥–ª–∞–≤–Ω—É—é
        </button>
    </div>
    <div class="user-info">
        <span>–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</span>
        <button class="btn btn-danger" onclick="admin.logout()">
            <i class="fas fa-sign-out-alt"></i> –í—ã–π—Ç–∏
        </button>
    </div>
</header>
            <div class="content-area">
                <!-- Dashboard Tab -->
                <div id="dashboard" class="tab-content active">
                    <!-- Welcome Message -->
                    <div class="content-section" style="background: linear-gradient(135deg, #d4edda, #c3e6cb); border-left: 4px solid var(--success);">
                        <h3><i class="fas fa-check-circle"></i> –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å!</h3>
                        <p>–°–∏—Å—Ç–µ–º–∞ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–∞. –°–µ—Å—Å–∏—è –∞–∫—Ç–∏–≤–Ω–∞.</p>
                    </div>

                    <!-- Statistics -->
                    <div class="stats-grid">
                        <div class="stat-card">
                            <i class="fas fa-globe" style="font-size: 2rem; color: var(--primary); margin-bottom: 1rem;"></i>
                            <h3 id="stats-countries">0</h3>
                            <p>–°—Ç—Ä–∞–Ω</p>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-map-marked-alt" style="font-size: 2rem; color: var(--success); margin-bottom: 1rem;"></i>
                            <h3 id="stats-tours">0</h3>
                            <p>–¢—É—Ä–æ–≤</p>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-calendar-check" style="font-size: 2rem; color: var(--warning); margin-bottom: 1rem;"></i>
                            <h3>1,247</h3>
                            <p>–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π</p>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-users" style="font-size: 2rem; color: var(--danger); margin-bottom: 1rem;"></i>
                            <h3>543</h3>
                            <p>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</p>
                        </div>
                    </div>

                    <!-- Quick Actions -->
                    <div class="content-section">
                        <div class="section-header">
                            <h3>–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h3>
                        </div>
                        <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                            <button class="btn btn-success" onclick="admin.openCountryModal()">
                                <i class="fas fa-plus"></i> –î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω—É
                            </button>
                            <button class="btn" onclick="admin.openTourModal()">
                                <i class="fas fa-plus-circle"></i> –°–æ–∑–¥–∞—Ç—å —Ç—É—Ä
                            </button>
                            <button class="btn" onclick="admin.exportData()">
                                <i class="fas fa-download"></i> –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
                            </button>
                            <button class="btn btn-warning" onclick="admin.addSampleData()">
                                <i class="fas fa-magic"></i> –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
                            </button>
                        </div>
                    </div>

                    <!-- Recent Activity -->
                    <div class="content-section">
                        <div class="section-header">
                            <h3>–ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</h3>
                        </div>
                        <div id="recent-activity">
                            <!-- Activity will be loaded here -->
                        </div>
                    </div>
                </div>

                <!-- Countries Tab -->
                <div id="countries" class="tab-content">
                    <div class="content-section">
                        <div class="section-header">
                            <h3>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∞–º–∏</h3>
                            <button class="btn btn-success" onclick="admin.openCountryModal()">
                                <i class="fas fa-plus"></i> –î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω—É
                            </button>
                        </div>
                        
                        <div class="card-grid" id="countries-list">
                            <!-- Countries will be loaded here -->
                        </div>
                    </div>
                </div>

                <!-- Tours Tab -->
                <div id="tours" class="tab-content">
                    <div class="content-section">
                        <div class="section-header">
                            <h3>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—É—Ä–∞–º–∏</h3>
                            <button class="btn btn-success" onclick="admin.openTourModal()">
                                <i class="fas fa-plus"></i> –°–æ–∑–¥–∞—Ç—å —Ç—É—Ä
                            </button>
                        </div>
                        
                        <div id="tours-list">
                            <!-- Tours will be loaded here -->
                        </div>
                    </div>
                </div>

                <!-- Content Tab -->
                <div id="content" class="tab-content">
                    <div class="content-section">
                        <div class="section-header">
                            <h3>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞</h3>
                        </div>
                        
                        <div class="form-group">
                            <label>–ó–∞–≥–æ–ª–æ–≤–æ–∫ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã</label>
                            <input type="text" id="hero-title" class="form-control" value="–û—Ç–∫—Ä–æ–π—Ç–µ –º–∏—Ä —Å WorldTravel">
                        </div>
                        
                        <div class="form-group">
                            <label>–¢–µ–∫—Å—Ç –ø–æ–¥ –∑–∞–≥–æ–ª–æ–≤–∫–æ–º</label>
                            <textarea id="hero-text" class="form-control" rows="3">–ú—ã —Å–æ–∑–¥–∞–µ–º –Ω–µ–∑–∞–±—ã–≤–∞–µ–º—ã–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è –ø–æ –≤—Å–µ–º—É –º–∏—Ä—É. –û—Ç —ç–∫–∑–æ—Ç–∏—á–µ—Å–∫–∏—Ö –ø–ª—è–∂–µ–π –¥–æ –≥–æ—Ä–Ω—ã—Ö –≤–µ—Ä—à–∏–Ω - –≤–∞—à–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –∑–¥–µ—Å—å.</textarea>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label>–ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–π —Ç–µ–ª–µ—Ñ–æ–Ω</label>
                                <input type="text" id="contact-phone" class="form-control" value="+7 (999) 123-45-67">
                            </div>
                            <div class="form-group">
                                <label>Email</label>
                                <input type="email" id="contact-email" class="form-control" value="info@worldtravel.com">
                            </div>
                        </div>

                        <div class="form-group">
                            <label>–ê–¥—Ä–µ—Å</label>
                            <input type="text" id="contact-address" class="form-control" value="–ú–æ—Å–∫–≤–∞, —É–ª. –¢—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∞—è, 15">
                        </div>
                        
                        <button class="btn btn-success" onclick="admin.saveContent()">
                            <i class="fas fa-save"></i> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
                        </button>
                    </div>
                </div>

                <!-- Settings Tab -->
                <div id="settings" class="tab-content">
                    <div class="content-section">
                        <div class="section-header">
                            <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã</h3>
                        </div>

                        <div class="form-group">
                            <label>–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏</label>
                            <input type="text" id="company-name" class="form-control" value="WorldTravel">
                        </div>

                        <div class="form-group">
                            <label>–í–∞–ª—é—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é</label>
                            <select id="default-currency" class="form-control">
                                <option value="$">–î–æ–ª–ª–∞—Ä ($)</option>
                                <option value="‚Ç¨">–ï–≤—Ä–æ (‚Ç¨)</option>
                                <option value="‚ÇΩ">–†—É–±–ª—å (‚ÇΩ)</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>–Ø–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞</label>
                            <select id="interface-language" class="form-control">
                                <option value="ru">–†—É—Å—Å–∫–∏–π</option>
                                <option value="en">English</option>
                            </select>
                        </div>

                        <button class="btn btn-success" onclick="admin.saveSettings()">
                            <i class="fas fa-save"></i> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                        </button>
                    </div>

                    <!-- Data Management -->
                    <div class="content-section">
                        <div class="section-header">
                            <h3>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏</h3>
                        </div>

                        <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                            <button class="btn" onclick="admin.exportData()">
                                <i class="fas fa-download"></i> –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
                            </button>
                            <button class="btn btn-warning" onclick="admin.importData()">
                                <i class="fas fa-upload"></i> –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
                            </button>
                            <button class="btn btn-danger" onclick="admin.clearData()">
                                <i class="fas fa-trash"></i> –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Country Modal -->
    <div class="modal" id="countryModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="countryModalTitle">–î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω—É</h3>
                <button class="modal-close" onclick="admin.closeModal('countryModal')">&times;</button>
            </div>
            <form id="countryForm">
                <div class="form-group">
                    <label>–ù–∞–∑–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω—ã *</label>
                    <input type="text" id="country-name" class="form-control" required>
                </div>
                <div class="form-group">
                    <label>–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ *</label>
                    <textarea id="country-short-description" class="form-control" rows="2" required></textarea>
                </div>
                <div class="form-group">
                    <label>–ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ</label>
                    <textarea id="country-description" class="form-control" rows="4"></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>–¶–µ–Ω–∞ –æ—Ç *</label>
                        <input type="text" id="country-price" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label>–°—Ç–æ–ª–∏—Ü–∞</label>
                        <input type="text" id="country-capital" class="form-control">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>–Ø–∑—ã–∫</label>
                        <input type="text" id="country-language" class="form-control">
                    </div>
                    <div class="form-group">
                        <label>–í–∞–ª—é—Ç–∞</label>
                        <input type="text" id="country-currency" class="form-control">
                    </div>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn" onclick="admin.closeModal('countryModal')">–û—Ç–º–µ–Ω–∞</button>
                    <button type="submit" class="btn btn-success">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å—Ç—Ä–∞–Ω—É</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Tour Modal -->
    <div class="modal" id="tourModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="tourModalTitle">–°–æ–∑–¥–∞—Ç—å —Ç—É—Ä</h3>
                <button class="modal-close" onclick="admin.closeModal('tourModal')">&times;</button>
            </div>
            <form id="tourForm">
                <div class="form-group">
                    <label>–ù–∞–∑–≤–∞–Ω–∏–µ —Ç—É—Ä–∞ *</label>
                    <input type="text" id="tour-name" class="form-control" required>
                </div>
                <div class="form-group">
                    <label>–°—Ç—Ä–∞–Ω–∞ *</label>
                    <select id="tour-country" class="form-control" required>
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—Ä–∞–Ω—É</option>
                    </select>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å *</label>
                        <input type="text" id="tour-duration" class="form-control" placeholder="7 –¥–Ω–µ–π" required>
                    </div>
                    <div class="form-group">
                        <label>–¶–µ–Ω–∞ *</label>
                        <input type="text" id="tour-price" class="form-control" placeholder="$500" required>
                    </div>
                </div>
                <div class="form-group">
                    <label>–û–ø–∏—Å–∞–Ω–∏–µ —Ç—É—Ä–∞</label>
                    <textarea id="tour-description" class="form-control" rows="4"></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn" onclick="admin.closeModal('tourModal')">–û—Ç–º–µ–Ω–∞</button>
                    <button type="submit" class="btn btn-success">–°–æ–∑–¥–∞—Ç—å —Ç—É—Ä</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // –ü–æ–ª–Ω–∞—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
        class SuperAdmin {
            constructor() {
                this.countries = [];
                this.tours = [];
                this.settings = {};
                this.currentEditingId = null;
                
                this.init();
            }

            init() {
                this.loadData();
                this.setupEventListeners();
                this.renderDashboard();
                console.log('üöÄ –°—É–ø–µ—Ä-–∞–¥–º–∏–Ω–∫–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞!');
            }

            loadData() {
                try {
                    const data = sessionStorage.getItem('worldtravel_data') || 
                                localStorage.getItem('worldtravel_data');
                    if (data) {
                        const parsed = JSON.parse(data);
                        this.countries = parsed.countries || [];
                        this.tours = parsed.tours || [];
                        this.settings = parsed.settings || {};
                        console.log('üìÅ –ó–∞–≥—Ä—É–∂–µ–Ω–æ:', this.countries.length, '—Å—Ç—Ä–∞–Ω,', this.tours.length, '—Ç—É—Ä–æ–≤');
                    }
                } catch (error) {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏:', error);
                    this.countries = [];
                    this.tours = [];
                }
            }

            saveData() {
                const data = {
                    countries: this.countries,
                    tours: this.tours,
                    settings: this.settings,
                    content: this.getContentData(),
                    lastUpdate: new Date().toISOString()
                };

                sessionStorage.setItem('worldtravel_data', JSON.stringify(data));
                localStorage.setItem('worldtravel_data', JSON.stringify(data));

                this.updateStats();
                this.showNotification('‚úÖ –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!', 'success');
                console.log('üíæ –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã');
            }

            setupEventListeners() {
                // –ù–∞–≤–∏–≥–∞—Ü–∏—è
                document.querySelectorAll('.nav-item').forEach(item => {
                    item.addEventListener('click', (e) => {
                        const tab = e.currentTarget.getAttribute('data-tab');
                        this.showTab(tab);
                    });
                });

                // –§–æ—Ä–º—ã
                document.getElementById('countryForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.saveCountry();
                });

                document.getElementById('tourForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.saveTour();
                });
            }

            showTab(tabName) {
                // –°–∫—Ä—ã—Ç—å –≤—Å–µ –≤–∫–ª–∞–¥–∫–∏
                document.querySelectorAll('.tab-content').forEach(tab => {
                    tab.classList.remove('active');
                });

                // –£–±—Ä–∞—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —É –≤—Å–µ—Ö –ø—É–Ω–∫—Ç–æ–≤ –º–µ–Ω—é
                document.querySelectorAll('.nav-item').forEach(item => {
                    item.classList.remove('active');
                });

                // –ü–æ–∫–∞–∑–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—É—é –≤–∫–ª–∞–¥–∫—É
                const tab = document.getElementById(tabName);
                if (tab) {
                    tab.classList.add('active');
                }

                // –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ø—É–Ω–∫—Ç –º–µ–Ω—é
                const navItem = document.querySelector(`[data-tab="${tabName}"]`);
                if (navItem) {
                    navItem.classList.add('active');
                }

                // –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫
                document.getElementById('page-title').textContent = 
                    navItem.querySelector('span').textContent;

                // –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤–∫–ª–∞–¥–∫–∏
                this.loadTabData(tabName);
            }

            loadTabData(tabName) {
                switch (tabName) {
                    case 'dashboard':
                        this.renderDashboard();
                        break;
                    case 'countries':
                        this.renderCountries();
                        break;
                    case 'tours':
                        this.renderTours();
                        break;
                    case 'content':
                        this.loadContent();
                        break;
                    case 'settings':
                        this.loadSettings();
                        break;
                }
            }

            renderDashboard() {
                this.updateStats();
                this.renderRecentActivity();
            }

            updateStats() {
                document.getElementById('stats-countries').textContent = this.countries.length;
                document.getElementById('stats-tours').textContent = this.tours.length;
            }

            renderRecentActivity() {
                const container = document.getElementById('recent-activity');
                const activities = [
                    { action: '–î–æ–±–∞–≤–ª–µ–Ω–∞ —Å—Ç—Ä–∞–Ω–∞', item: '–ò—Ç–∞–ª–∏—è', time: '2 –º–∏–Ω—É—Ç—ã –Ω–∞–∑–∞–¥' },
                    { action: '–°–æ–∑–¥–∞–Ω —Ç—É—Ä', item: '–†–∏–º—Å–∫–∏–µ –∫–∞–Ω–∏–∫—É–ª—ã', time: '5 –º–∏–Ω—É—Ç –Ω–∞–∑–∞–¥' },
                    { action: '–û–±–Ω–æ–≤–ª–µ–Ω –∫–æ–Ω—Ç–µ–Ω—Ç', item: '–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞', time: '10 –º–∏–Ω—É—Ç –Ω–∞–∑–∞–¥' }
                ];

                container.innerHTML = activities.map(activity => `
                    <div class="tour-card">
                        <div class="tour-header">
                            <div>
                                <strong>${activity.action}</strong>
                                <div style="color: #666; margin-top: 0.25rem;">${activity.item}</div>
                            </div>
                            <span style="color: #999; font-size: 0.9rem;">${activity.time}</span>
                        </div>
                    </div>
                `).join('');
            }

            renderCountries() {
                const container = document.getElementById('countries-list');
                
                if (this.countries.length === 0) {
                    container.innerHTML = `
                        <div style="text-align: center; padding: 3rem; color: #666; grid-column: 1 / -1;">
                            <i class="fas fa-globe-americas" style="font-size: 4rem; margin-bottom: 1rem;"></i>
                            <h3>–°—Ç—Ä–∞–Ω –ø–æ–∫–∞ –Ω–µ—Ç</h3>
                            <p>–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—É—é —Å—Ç—Ä–∞–Ω—É –∏—Å–ø–æ–ª—å–∑—É—è –∫–Ω–æ–ø–∫—É –≤—ã—à–µ</p>
                        </div>
                    `;
                    return;
                }

                container.innerHTML = this.countries.map(country => `
                    <div class="card">
                        <div class="card-header">
                            <h4 style="margin: 0; color: white;">${country.name}</h4>
                        </div>
                        <div class="card-body">
                            <p style="color: #666; margin-bottom: 1rem;">${country.shortDescription || country.description || ''}</p>
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <strong style="color: var(--primary);">${country.price}</strong>
                                <span style="font-size: 0.9rem; color: #999;">${country.tours ? country.tours.length : 0} —Ç—É—Ä–æ–≤</span>
                            </div>
                        </div>
                        <div class="card-actions">
                            <button class="btn" onclick="admin.editCountry('${country.id}')">
                                <i class="fas fa-edit"></i> –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
                            </button>
                            <button class="btn btn-danger" onclick="admin.deleteCountry('${country.id}')">
                                <i class="fas fa-trash"></i> –£–¥–∞–ª–∏—Ç—å
                            </button>
                        </div>
                    </div>
                `).join('');
            }

            renderTours() {
                const container = document.getElementById('tours-list');
                
                if (this.tours.length === 0) {
                    container.innerHTML = `
                        <div style="text-align: center; padding: 3rem; color: #666;">
                            <i class="fas fa-map-marked-alt" style="font-size: 4rem; margin-bottom: 1rem;"></i>
                            <h3>–¢—É—Ä–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç</h3>
                            <p>–°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—ã–π —Ç—É—Ä –∏—Å–ø–æ–ª—å–∑—É—è –∫–Ω–æ–ø–∫—É –≤—ã—à–µ</p>
                        </div>
                    `;
                    return;
                }

                container.innerHTML = this.tours.map(tour => `
                    <div class="tour-card">
                        <div class="tour-header">
                            <div>
                                <h4 style="margin: 0 0 0.5rem 0;">${tour.name}</h4>
                                <span class="tour-country">${tour.country}</span>
                            </div>
                            <div style="text-align: right;">
                                <div style="font-weight: bold; color: var(--primary);">${tour.price}</div>
                                <div style="color: #666; font-size: 0.9rem;">${tour.duration}</div>
                            </div>
                        </div>
                        <p style="color: #666; margin: 0;">${tour.description || ''}</p>
                        <div style="margin-top: 1rem; display: flex; gap: 0.5rem;">
                            <button class="btn" onclick="admin.editTour('${tour.id}')">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn btn-danger" onclick="admin.deleteTour('${tour.id}')">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                `).join('');
            }

            openCountryModal(countryId = null) {
                this.currentEditingId = countryId;
                const modal = document.getElementById('countryModal');
                const title = document.getElementById('countryModalTitle');

                if (countryId) {
                    title.textContent = '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä–∞–Ω—É';
                    this.fillCountryForm(countryId);
                } else {
                    title.textContent = '–î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω—É';
                    this.resetCountryForm();
                }

                this.openModal('countryModal');
            }

            fillCountryForm(countryId) {
                const country = this.countries.find(c => c.id === countryId);
                if (country) {
                    document.getElementById('country-name').value = country.name;
                    document.getElementById('country-short-description').value = country.shortDescription || '';
                    document.getElementById('country-description').value = country.description || '';
                    document.getElementById('country-price').value = country.price || '';
                    document.getElementById('country-capital').value = country.capital || '';
                    document.getElementById('country-language').value = country.language || '';
                    document.getElementById('country-currency').value = country.currency || '';
                }
            }

            resetCountryForm() {
                document.getElementById('countryForm').reset();
            }

            saveCountry() {
                const name = document.getElementById('country-name').value;
                const shortDescription = document.getElementById('country-short-description').value;
                const description = document.getElementById('country-description').value;
                const price = document.getElementById('country-price').value;
                const capital = document.getElementById('country-capital').value;
                const language = document.getElementById('country-language').value;
                const currency = document.getElementById('country-currency').value;

                if (!name || !shortDescription || !price) {
                    this.showNotification('‚ùå –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è', 'error');
                    return;
                }

                const countryData = {
                    id: this.currentEditingId || this.generateId(name),
                    name: name,
                    shortDescription: shortDescription,
                    description: description,
                    price: price,
                    capital: capital,
                    language: language,
                    currency: currency,
                    images: [],
                    tours: []
                };

                if (this.currentEditingId) {
                    // –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
                    const index = this.countries.findIndex(c => c.id === this.currentEditingId);
                    if (index !== -1) {
                        this.countries[index] = { ...this.countries[index], ...countryData };
                    }
                    this.showNotification('‚úÖ –°—Ç—Ä–∞–Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞!', 'success');
                } else {
                    // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ
                    this.countries.push(countryData);
                    this.showNotification('‚úÖ –°—Ç—Ä–∞–Ω–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞!', 'success');
                }

                this.saveData();
                this.closeModal('countryModal');
                this.renderCountries();
            }

                        openTourModal(tourId = null) {
                this.currentEditingId = tourId;
                const modal = document.getElementById('tourModal');
                const title = document.getElementById('tourModalTitle');

                // –ó–∞–ø–æ–ª–Ω—è–µ–º –≤—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ —Å—Ç—Ä–∞–Ω
                this.populateCountrySelect();

                if (tourId) {
                    title.textContent = '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç—É—Ä';
                    this.fillTourForm(tourId);
                } else {
                    title.textContent = '–°–æ–∑–¥–∞—Ç—å —Ç—É—Ä';
                    this.resetTourForm();
                }

                this.openModal('tourModal');
            }

            populateCountrySelect() {
                const select = document.getElementById('tour-country');
                select.innerHTML = '<option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—Ä–∞–Ω—É</option>';
                
                this.countries.forEach(country => {
                    const option = document.createElement('option');
                    option.value = country.name;
                    option.textContent = country.name;
                    select.appendChild(option);
                });
            }

            fillTourForm(tourId) {
                const tour = this.tours.find(t => t.id === tourId);
                if (tour) {
                    document.getElementById('tour-name').value = tour.name;
                    document.getElementById('tour-country').value = tour.country;
                    document.getElementById('tour-duration').value = tour.duration;
                    document.getElementById('tour-price').value = tour.price;
                    document.getElementById('tour-description').value = tour.description || '';
                }
            }

            resetTourForm() {
                document.getElementById('tourForm').reset();
            }

            saveTour() {
                const name = document.getElementById('tour-name').value;
                const country = document.getElementById('tour-country').value;
                const duration = document.getElementById('tour-duration').value;
                const price = document.getElementById('tour-price').value;
                const description = document.getElementById('tour-description').value;

                if (!name || !country || !duration || !price) {
                    this.showNotification('‚ùå –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è', 'error');
                    return;
                }

                const tourData = {
                    id: this.currentEditingId || this.generateId(name),
                    name: name,
                    country: country,
                    duration: duration,
                    price: price,
                    description: description,
                    createdAt: new Date().toISOString()
                };

                if (this.currentEditingId) {
                    // –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
                    const index = this.tours.findIndex(t => t.id === this.currentEditingId);
                    if (index !== -1) {
                        this.tours[index] = { ...this.tours[index], ...tourData };
                    }
                    this.showNotification('‚úÖ –¢—É—Ä –æ–±–Ω–æ–≤–ª–µ–Ω!', 'success');
                } else {
                    // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ
                    this.tours.push(tourData);
                    this.showNotification('‚úÖ –¢—É—Ä —Å–æ–∑–¥–∞–Ω!', 'success');
                }

                this.saveData();
                this.closeModal('tourModal');
                this.renderTours();
            }

            editCountry(countryId) {
                this.openCountryModal(countryId);
            }

            editTour(tourId) {
                this.openTourModal(tourId);
            }

            deleteCountry(countryId) {
                if (confirm('–£–¥–∞–ª–∏—Ç—å —Å—Ç—Ä–∞–Ω—É? –í—Å–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Ç—É—Ä—ã —Ç–∞–∫–∂–µ –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã.')) {
                    // –£–¥–∞–ª—è–µ–º —Ç—É—Ä—ã —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω—ã
                    this.tours = this.tours.filter(t => {
                        const country = this.countries.find(c => c.id === countryId);
                        return !country || t.country !== country.name;
                    });

                    // –£–¥–∞–ª—è–µ–º —Å—Ç—Ä–∞–Ω—É
                    this.countries = this.countries.filter(c => c.id !== countryId);
                    
                    this.saveData();
                    this.renderCountries();
                    this.renderTours();
                    this.showNotification('‚úÖ –°—Ç—Ä–∞–Ω–∞ –∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Ç—É—Ä—ã —É–¥–∞–ª–µ–Ω—ã!', 'success');
                }
            }

            deleteTour(tourId) {
                if (confirm('–£–¥–∞–ª–∏—Ç—å —Ç—É—Ä?')) {
                    this.tours = this.tours.filter(t => t.id !== tourId);
                    this.saveData();
                    this.renderTours();
                    this.showNotification('‚úÖ –¢—É—Ä —É–¥–∞–ª–µ–Ω!', 'success');
                }
            }

            loadContent() {
                const data = this.getContentData();
                document.getElementById('hero-title').value = data.heroTitle;
                document.getElementById('hero-text').value = data.heroText;
                document.getElementById('contact-phone').value = data.contactPhone;
                document.getElementById('contact-email').value = data.contactEmail;
                document.getElementById('contact-address').value = data.contactAddress;
            }

            getContentData() {
                const data = sessionStorage.getItem('worldtravel_data') || 
                            localStorage.getItem('worldtravel_data');
                if (data) {
                    const parsed = JSON.parse(data);
                    return parsed.content || this.getDefaultContent();
                }
                return this.getDefaultContent();
            }

            getDefaultContent() {
                return {
                    heroTitle: '–û—Ç–∫—Ä–æ–π—Ç–µ –º–∏—Ä —Å WorldTravel',
                    heroText: '–ú—ã —Å–æ–∑–¥–∞–µ–º –Ω–µ–∑–∞–±—ã–≤–∞–µ–º—ã–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è –ø–æ –≤—Å–µ–º—É –º–∏—Ä—É. –û—Ç —ç–∫–∑–æ—Ç–∏—á–µ—Å–∫–∏—Ö –ø–ª—è–∂–µ–π –¥–æ –≥–æ—Ä–Ω—ã—Ö –≤–µ—Ä—à–∏–Ω - –≤–∞—à–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –∑–¥–µ—Å—å.',
                    contactPhone: '+7 (999) 123-45-67',
                    contactEmail: 'info@worldtravel.com',
                    contactAddress: '–ú–æ—Å–∫–≤–∞, —É–ª. –¢—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∞—è, 15'
                };
            }

            saveContent() {
                const content = {
                    heroTitle: document.getElementById('hero-title').value,
                    heroText: document.getElementById('hero-text').value,
                    contactPhone: document.getElementById('contact-phone').value,
                    contactEmail: document.getElementById('contact-email').value,
                    contactAddress: document.getElementById('contact-address').value
                };

                this.updateContentData(content);
                this.showNotification('‚úÖ –ö–æ–Ω—Ç–µ–Ω—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω!', 'success');
            }

            updateContentData(content) {
                const data = sessionStorage.getItem('worldtravel_data') || 
                            localStorage.getItem('worldtravel_data');
                
                let parsed = { countries: [], tours: [], settings: {}, content: {} };
                if (data) {
                    parsed = JSON.parse(data);
                }

                parsed.content = content;
                parsed.lastUpdate = new Date().toISOString();

                sessionStorage.setItem('worldtravel_data', JSON.stringify(parsed));
                localStorage.setItem('worldtravel_data', JSON.stringify(parsed));
            }

            loadSettings() {
                document.getElementById('company-name').value = this.settings.companyName || 'WorldTravel';
                document.getElementById('default-currency').value = this.settings.defaultCurrency || '$';
                document.getElementById('interface-language').value = this.settings.interfaceLanguage || 'ru';
            }

            saveSettings() {
                this.settings = {
                    companyName: document.getElementById('company-name').value,
                    defaultCurrency: document.getElementById('default-currency').value,
                    interfaceLanguage: document.getElementById('interface-language').value
                };

                this.saveData();
                this.showNotification('‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!', 'success');
            }

            exportData() {
                const data = {
                    countries: this.countries,
                    tours: this.tours,
                    settings: this.settings,
                    content: this.getContentData(),
                    exportDate: new Date().toISOString(),
                    version: '1.0'
                };

                const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
                const a = document.createElement('a');
                a.href = url;
                a.download = `worldtravel-backup-${new Date().toISOString().split('T')[0]}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);

                this.showNotification('‚úÖ –î–∞–Ω–Ω—ã–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã!', 'success');
            }

            importData() {
                const input = document.createElement('input');
                input.type = 'file';
                input.accept = '.json';
                
                input.onchange = (e) => {
                    const file = e.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = (event) => {
                            try {
                                const data = JSON.parse(event.target.result);
                                
                                if (confirm('–ó–∞–º–µ–Ω–∏—Ç—å —Ç–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏?')) {
                                    this.countries = data.countries || [];
                                    this.tours = data.tours || [];
                                    this.settings = data.settings || {};
                                    
                                    if (data.content) {
                                        this.updateContentData(data.content);
                                    }
                                    
                                    this.saveData();
                                    this.showNotification('‚úÖ –î–∞–Ω–Ω—ã–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã!', 'success');
                                    this.renderDashboard();
                                    this.renderCountries();
                                    this.renderTours();
                                }
                            } catch (error) {
                                this.showNotification('‚ùå –û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞: –Ω–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞', 'error');
                            }
                        };
                        reader.readAsText(file);
                    }
                };
                
                input.click();
            }

            clearData() {
                if (confirm('–í–ù–ò–ú–ê–ù–ò–ï! –≠—Ç–æ —É–¥–∞–ª–∏—Ç –í–°–ï –¥–∞–Ω–Ω—ã–µ (—Å—Ç—Ä–∞–Ω—ã, —Ç—É—Ä—ã, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏). –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å?')) {
                    this.countries = [];
                    this.tours = [];
                    this.settings = {};
                    
                    sessionStorage.removeItem('worldtravel_data');
                    localStorage.removeItem('worldtravel_data');
                    
                    this.showNotification('‚úÖ –í—Å–µ –¥–∞–Ω–Ω—ã–µ –æ—á–∏—â–µ–Ω—ã!', 'success');
                    this.renderDashboard();
                    this.renderCountries();
                    this.renderTours();
                }
            }

            addSampleData() {
                const sampleCountries = [
                    {
                        id: 'france',
                        name: '–§—Ä–∞–Ω—Ü–∏—è',
                        shortDescription: '–†–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è –§—Ä–∞–Ω—Ü–∏—è —Å –µ—ë –±–æ–≥–∞—Ç–æ–π –∏—Å—Ç–æ—Ä–∏–µ–π –∏ –∏–∑—ã—Å–∫–∞–Ω–Ω–æ–π –∫—É—Ö–Ω–µ–π.',
                        description: '–§—Ä–∞–Ω—Ü–∏—è - —Å—Ç—Ä–∞–Ω–∞ –∏—Å–∫—É—Å—Å—Ç–≤–∞, –º–æ–¥—ã –∏ –≥–∞—Å—Ç—Ä–æ–Ω–æ–º–∏–∏. –ü–æ—Å–µ—Ç–∏—Ç–µ –≠–π—Ñ–µ–ª–µ–≤—É –±–∞—à–Ω—é, –õ—É–≤—Ä –∏ –ø—Ä–æ–≤–∞–Ω—Å–∞–ª—å—Å–∫–∏–µ –ø–æ–ª—è –ª–∞–≤–∞–Ω–¥—ã.',
                        price: '–æ—Ç ‚Ç¨800',
                        capital: '–ü–∞—Ä–∏–∂',
                        language: '–§—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π',
                        currency: '–ï–≤—Ä–æ (‚Ç¨)',
                        images: [],
                        tours: []
                    },
                    {
                        id: 'italy',
                        name: '–ò—Ç–∞–ª–∏—è',
                        shortDescription: '–°—Ç—Ä–∞–Ω–∞ –∏—Å–∫—É—Å—Å—Ç–≤–∞, –¥—Ä–µ–≤–Ω–µ–π –∏—Å—Ç–æ—Ä–∏–∏ –∏ —Å–∞–º–æ–π –≤–∫—É—Å–Ω–æ–π –∫—É—Ö–Ω–∏ –≤ –º–∏—Ä–µ.',
                        description: '–ò—Ç–∞–ª–∏—è –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –ø—É—Ç–µ—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫–∞–º –±–æ–≥–∞—Ç–æ–µ –∫—É–ª—å—Ç—É—Ä–Ω–æ–µ –Ω–∞—Å–ª–µ–¥–∏–µ, –æ—Ç –î—Ä–µ–≤–Ω–µ–≥–æ –†–∏–º–∞ –¥–æ —ç–ø–æ—Ö–∏ –í–æ–∑—Ä–æ–∂–¥–µ–Ω–∏—è.',
                        price: '–æ—Ç ‚Ç¨750',
                        capital: '–†–∏–º',
                        language: '–ò—Ç–∞–ª—å—è–Ω—Å–∫–∏–π',
                        currency: '–ï–≤—Ä–æ (‚Ç¨)',
                        images: [],
                        tours: []
                    }
                ];

                const sampleTours = [
                    {
                        id: 'paris-weekend',
                        name: '–ü–∞—Ä–∏–∂—Å–∫–∏–µ –≤—ã—Ö–æ–¥–Ω—ã–µ',
                        country: '–§—Ä–∞–Ω—Ü–∏—è',
                        duration: '3 –¥–Ω—è',
                        price: '‚Ç¨450',
                        description: '–≠–∫—Å–ø—Ä–µ—Å—Å-—Ç—É—Ä –ø–æ —Å–∞–º—ã–º –∑–Ω–∞–∫–æ–≤—ã–º –º–µ—Å—Ç–∞–º –ü–∞—Ä–∏–∂–∞',
                        createdAt: new Date().toISOString()
                    },
                    {
                        id: 'rome-classic',
                        name: '–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –†–∏–º',
                        country: '–ò—Ç–∞–ª–∏—è',
                        duration: '5 –¥–Ω–µ–π',
                        price: '‚Ç¨600',
                        description: '–ó–Ω–∞–∫–æ–º—Å—Ç–≤–æ —Å –≥–ª–∞–≤–Ω—ã–º–∏ –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—è–º–∏ –í–µ—á–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∞',
                        createdAt: new Date().toISOString()
                    }
                ];

                this.countries = [...this.countries, ...sampleCountries];
                this.tours = [...this.tours, ...sampleTours];
                this.saveData();
                
                this.showNotification('‚úÖ –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã!', 'success');
                this.renderDashboard();
                this.renderCountries();
                this.renderTours();
            }

            openModal(modalId) {
                const modal = document.getElementById(modalId);
                if (modal) {
                    modal.classList.add('active');
                }
            }

            closeModal(modalId) {
                const modal = document.getElementById(modalId);
                if (modal) {
                    modal.classList.remove('active');
                }
                this.currentEditingId = null;
            }

            showNotification(message, type = 'success') {
                const notification = document.createElement('div');
                notification.className = `notification ${type}`;
                notification.innerHTML = `
                    <i class="fas fa-${type === 'success' ? 'check' : 'exclamation'}-circle"></i>
                    <span>${message}</span>
                    <button class="notification-close" onclick="this.parentElement.remove()">&times;</button>
                `;

                document.body.appendChild(notification);

                // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è
                setTimeout(() => notification.classList.add('show'), 100);

                // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫—Ä—ã—Ç–∏–µ
                setTimeout(() => {
                    if (notification.parentElement) {
                        notification.remove();
                    }
                }, 5000);
            }

            generateId(name) {
                return name.toLowerCase()
                    .replace(/[^a-z0-9–∞-—è—ë]/g, '-')
                    .replace(/-+/g, '-')
                    .replace(/^-|-$/g, '') + '-' + Date.now();
            }

            logout() {
                if (confirm('–í—ã–π—Ç–∏ –∏–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏?')) {
                    localStorage.removeItem('adminSession');
                    sessionStorage.removeItem('adminSession');
                    window.location.href = 'admin-login.html';
                }
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
        let admin;
        document.addEventListener('DOMContentLoaded', () => {
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Å—Å–∏–∏
            const session = localStorage.getItem('adminSession') || sessionStorage.getItem('adminSession');
            if (!session) {
                window.location.href = 'admin-login.html';
                return;
            }

            admin = new SuperAdmin();
            window.admin = admin;

            // –ó–∞—â–∏—Ç–∞ –æ—Ç –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –∞–¥–º–∏–Ω–∫–µ
            document.addEventListener('contextmenu', (e) => e.preventDefault());
            document.addEventListener('copy', (e) => e.preventDefault());
            document.addEventListener('cut', (e) => e.preventDefault());
        });
    </script>
</body>
</html>



=== FILE: ./test-script-load.js ===
// Test script load
console.log('‚úÖ TEST SCRIPT LOADED - scripts are working');

// Test function
window.testScript = function() {
    console.log('‚úÖ testScript() called successfully');
    return 'Scripts are working!';
};

// Check if bulletproof sync loaded
setTimeout(() => {
    if (window.forceBulletproofSync) {
        console.log('‚úÖ bulletproof-sync.js loaded correctly');
    } else {
        console.log('‚ùå bulletproof-sync.js NOT loaded');
    }
}, 1000);



=== FILE: ./image-manager-dataurl.js ===
// Image Manager with Data URL support - —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É Blob URL
function ImageManagerDataURL() {
    this.maxFileSize = 2 * 1024 * 1024; // 2MB –¥–ª—è Data URL
    this.supportedFormats = ['image/jpeg', 'image/jpg', 'image/png', 'image/gif', 'image/webp'];
    this.init();
}

ImageManagerDataURL.prototype.init = function() {
    console.log('üñºÔ∏è Image Manager with Data URL initialized');
    this.integrateWithEditor();
};

ImageManagerDataURL.prototype.integrateWithEditor = function() {
    const checkEditor = () => {
        if (window.editor) {
            this.patchEditorMethods();
            console.log('‚úÖ Image Manager integrated with editor');
        } else {
            setTimeout(checkEditor, 100);
        }
    };
    checkEditor();
};

ImageManagerDataURL.prototype.patchEditorMethods = function() {
    const self = this;
    
    // –ó–∞–º–µ–Ω—è–µ–º –º–µ—Ç–æ–¥ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–∞ –≤–µ—Ä—Å–∏—é —Å Data URL
    if (window.editor.uploadImage) {
        window.editor.uploadImage = function(fieldId) {
            self.uploadImageAsDataURL(fieldId);
        };
    }
    
    // –£–ª—É—á—à–∞–µ–º –º–µ—Ç–æ–¥ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ URL
    if (window.editor.setImageUrl) {
        const originalSetImageUrl = window.editor.setImageUrl;
        window.editor.setImageUrl = function(fieldId) {
            self.setImageUrlEnhanced(fieldId, originalSetImageUrl);
        };
    }
    
    // –î–æ–±–∞–≤–ª—è–µ–º –º–µ—Ç–æ–¥ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö Blob URL –≤ Data URL
    this.convertExistingBlobUrls();
};

// –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ Blob URL –≤ Data URL
ImageManagerDataURL.prototype.convertExistingBlobUrls = function() {
    if (!window.editor || !window.editor.currentData) return;
    
    let converted = false;
    const data = window.editor.currentData;
    
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ –∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ Blob URL
    const convertBlobUrlsInObject = (obj) => {
        if (!obj || typeof obj !== 'object') return;
        
        Object.keys(obj).forEach(key => {
            const value = obj[key];
            if (typeof value === 'string' && value.startsWith('blob:')) {
                console.log('üîÑ Converting blob URL to placeholder:', value);
                obj[key] = 'images/travel-placeholder.svg';
                converted = true;
            } else if (typeof value === 'object') {
                convertBlobUrlsInObject(value);
            }
        });
    };
    
    convertBlobUrlsInObject(data);
    
    if (converted) {
        console.log('‚úÖ Converted blob URLs in data');
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
        if (window.editor.saveData) {
            window.editor.saveData();
        }
    }
};

ImageManagerDataURL.prototype.uploadImageAsDataURL = function(fieldId) {
    const input = document.createElement('input');
    input.type = 'file';
    input.accept = this.supportedFormats.join(',');
    
    input.onchange = (e) => {
        const file = e.target.files[0];
        if (!file) return;
        
        // –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–∞–π–ª–∞
        if (!this.validateFile(file)) {
            return;
        }
        
        // –ß–∏—Ç–∞–µ–º —Ñ–∞–π–ª –∫–∞–∫ Data URL
        const reader = new FileReader();
        
        reader.onload = (e) => {
            const dataUrl = e.target.result;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–ª–µ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ
            if (window.editor && window.editor.updateImageField) {
                window.editor.updateImageField(fieldId, dataUrl);
            }
            
            this.showNotification('–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ –∫–∞–∫ Data URL', 'success');
        };
        
        reader.onerror = () => {
            this.showNotification('–û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è —Ñ–∞–π–ª–∞', 'error');
        };
        
        reader.readAsDataURL(file);
    };
    
    input.click();
};

ImageManagerDataURL.prototype.validateFile = function(file) {
    if (!this.supportedFormats.includes(file.type)) {
        this.showNotification('–ù–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ JPG, PNG, GIF –∏–ª–∏ WebP.', 'error');
        return false;
    }
    
    if (file.size > this.maxFileSize) {
        this.showNotification(`–§–∞–π–ª —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: ${this.formatFileSize(this.maxFileSize)}.`, 'error');
        return false;
    }
    
    return true;
};

ImageManagerDataURL.prototype.setImageUrlEnhanced = function(fieldId, originalMethod) {
    const currentValue = this.getCurrentImageValue(fieldId);
    
    // –ï—Å–ª–∏ —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ - Blob URL, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
    if (currentValue && currentValue.startsWith('blob:')) {
        if (!confirm('–¢–µ–∫—É—â–µ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–π Blob URL. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–Ω–æ–≤–æ –¥–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è. –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å?')) {
            return;
        }
    }
    
    // –ò—Å–ø–æ–ª—å–∑—É–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –º–µ—Ç–æ–¥, –Ω–æ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
    const url = prompt('–í–≤–µ–¥–∏—Ç–µ URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:', currentValue || '');
    
    if (url === null) return;
    
    if (url === '') {
        if (window.editor && window.editor.removeImage) {
            window.editor.removeImage(fieldId);
        }
        return;
    }
    
    // –í–∞–ª–∏–¥–∞—Ü–∏—è URL
    if (this.validateImageUrl(url)) {
        if (window.editor && window.editor.updateImageField) {
            window.editor.updateImageField(fieldId, url);
        }
        this.showNotification('URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω', 'success');
    } else {
        this.showNotification('–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è', 'error');
    }
};

ImageManagerDataURL.prototype.validateImageUrl = function(url) {
    try {
        // –î–ª—è data URL –≤—Å–µ–≥–¥–∞ –≤–∞–ª–∏–¥–Ω—ã
        if (url.startsWith('data:image')) return true;
        
        // –î–ª—è –æ–±—ã—á–Ω—ã—Ö URL –ø—Ä–æ–≤–µ—Ä—è–µ–º –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å
        if (url.startsWith('http://') || url.startsWith('https://')) {
            new URL(url);
            return true;
        }
        
        // –†–∞–∑—Ä–µ—à–∞–µ–º –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –ø—É—Ç–∏
        if (url.startsWith('/') || url.startsWith('images/') || url.startsWith('./')) {
            return true;
        }
        
        return false;
    } catch {
        return false;
    }
};

ImageManagerDataURL.prototype.getCurrentImageValue = function(fieldId) {
    const field = document.querySelector(`[data-field="${fieldId}"]`);
    return field ? field.value : '';
};

ImageManagerDataURL.prototype.formatFileSize = function(bytes) {
    if (bytes === 0) return '0 Bytes';
    const k = 1024;
    const sizes = ['Bytes', 'KB', 'MB', 'GB'];
    const i = Math.floor(Math.log(bytes) / Math.log(k));
    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
};

ImageManagerDataURL.prototype.showNotification = function(message, type) {
    if (window.editor && window.editor.showNotification) {
        window.editor.showNotification(message, type);
    } else {
        console.log(`${type === 'error' ? '‚ùå' : '‚úÖ'} ${message}`);
    }
};

// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ Blob URL –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
ImageManagerDataURL.prototype.cleanupBlobUrls = function() {
    // –†–µ–≤–æ–∫–∞–µ–º –≤—Å–µ Blob URL –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
    document.querySelectorAll('img[src^="blob:"]').forEach(img => {
        try {
            URL.revokeObjectURL(img.src);
            img.src = 'images/travel-placeholder.svg';
        } catch (e) {
            // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –æ—à–∏–±–∫–∏ —Ä–µ–≤–æ–∫–∞
        }
    });
};

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', () => {
        new ImageManagerDataURL();
    });
} else {
    new ImageManagerDataURL();
}

// –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
window.ImageManagerDataURL = ImageManagerDataURL;



=== FILE: ./update-content.js ===
// Enhanced content updater with support for stats and services
function ContentUpdater() {
    this.appliedChanges = new Set();
    this.init();
}

ContentUpdater.prototype.init = function() {
    console.log('üöÄ Enhanced ContentUpdater initialized');
    
    var self = this;
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(function() { self.applyAllChanges(); }, 100);
        });
    } else {
        setTimeout(function() { self.applyAllChanges(); }, 100);
    }

    window.addEventListener('dataUpdated', function(e) {
        console.log('üîÑ Data update received:', e.detail);
        setTimeout(function() { self.applyAllChanges(); }, 50);
    });

    setInterval(function() { self.applyAllChanges(); }, 2000);
};

ContentUpdater.prototype.applyAllChanges = function() {
    if (!window.dataManager) {
        console.log('‚è≥ Waiting for DataManager...');
        this.applyLocalChanges();
        return;
    }

    var data = window.dataManager.getData();
    if (!data) {
        console.log('üì≠ No data available');
        this.applyLocalChanges();
        return;
    }

    var changeHash = this.getDataHash(data);
    if (this.appliedChanges.has(changeHash)) {
        return;
    }

    console.log('üîÑ Applying changes from DataManager...');
    
    this.applyContentChanges(data.content);
    this.applyContactChanges(data.contacts);
    this.applySettingsChanges(data.settings);
    this.applyStatsChanges(data.content);
    this.applyServicesChanges(data.content);
    
    this.appliedChanges.add(changeHash);
    console.log('‚úÖ Changes applied successfully');
};

ContentUpdater.prototype.applyLocalChanges = function() {
    var localData = localStorage.getItem('worldtravel_data');
    if (localData) {
        try {
            var data = JSON.parse(localData);
            console.log('üìÅ Applying local changes...');
            this.applyContentChanges(data.content);
            this.applyContactChanges(data.contacts);
            this.applySettingsChanges(data.settings);
            this.applyStatsChanges(data.content);
            this.applyServicesChanges(data.content);
        } catch (error) {
            console.error('‚ùå Error applying local changes:', error);
        }
    }
};

ContentUpdater.prototype.applyStatsChanges = function(content) {
    if (!content?.about?.stats) {
        // –ï—Å–ª–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –Ω–µ—Ç, —Å–∫—Ä—ã–≤–∞–µ–º –±–ª–æ–∫
        this.hideStatsSection();
        return;
    }

    var stats = content.about.stats;
    
    // –§–∏–ª—å—Ç—Ä—É–µ–º —Ç–æ–ª—å–∫–æ –≤–∞–ª–∏–¥–Ω—ã–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
    var validStats = stats.filter(stat => stat.value && stat.label);
    
    if (validStats.length === 0) {
        this.hideStatsSection();
        return;
    }
    
    console.log('üìä Applying stats changes:', validStats.length, 'valid items');
    
    var statElements = document.querySelectorAll('.stat');
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –±–ª–æ–∫ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
    this.showStatsSection();
    
    if (statElements.length >= validStats.length) {
        validStats.forEach(function(stat, index) {
            if (statElements[index]) {
                var valueElement = statElements[index].querySelector('h3');
                var labelElement = statElements[index].querySelector('p');
                
                if (valueElement) {
                    valueElement.textContent = stat.value;
                    // –î–æ–±–∞–≤–ª—è–µ–º –∞—Ç—Ä–∏–±—É—Ç –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ —Å—á–µ—Ç—á–∏–∫–∞
                    if (!valueElement.hasAttribute('data-target')) {
                        valueElement.setAttribute('data-target', stat.value);
                    }
                }
                if (labelElement) {
                    labelElement.textContent = stat.label;
                }
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç
                statElements[index].style.display = 'block';
            }
        });
        
        // –°–∫—Ä—ã–≤–∞–µ–º –ª–∏—à–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã
        for (var i = validStats.length; i < statElements.length; i++) {
            statElements[i].style.display = 'none';
        }
    }
};

ContentUpdater.prototype.hideStatsSection = function() {
    var statsContainer = document.querySelector('.stats');
    if (statsContainer) {
        statsContainer.style.display = 'none';
    }
};

ContentUpdater.prototype.showStatsSection = function() {
    var statsContainer = document.querySelector('.stats');
    if (statsContainer) {
        statsContainer.style.display = 'flex';
    }
};

ContentUpdater.prototype.applyServicesChanges = function(content) {
    if (!content?.services?.services) {
        // –ï—Å–ª–∏ —É—Å–ª—É–≥ –Ω–µ—Ç, —Å–∫—Ä—ã–≤–∞–µ–º –±–ª–æ–∫
        this.hideServicesSection();
        return;
    }

    var services = content.services.services;
    
    // –§–∏–ª—å—Ç—Ä—É–µ–º —Ç–æ–ª—å–∫–æ –≤–∞–ª–∏–¥–Ω—ã–µ —É—Å–ª—É–≥–∏
    var validServices = services.filter(service => service.title && service.description);
    
    if (validServices.length === 0) {
        this.hideServicesSection();
        return;
    }
    
    console.log('üéØ Applying services changes:', validServices.length, 'valid items');
    
    var serviceCards = document.querySelectorAll('.service-card');
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –±–ª–æ–∫ —É—Å–ª—É–≥
    this.showServicesSection();
    
    if (serviceCards.length >= validServices.length) {
        validServices.forEach(function(service, index) {
            if (serviceCards[index]) {
                var titleElement = serviceCards[index].querySelector('h3');
                var descElement = serviceCards[index].querySelector('p');
                var iconElement = serviceCards[index].querySelector('.service-icon i');
                
                if (titleElement) titleElement.textContent = service.title;
                if (descElement) descElement.textContent = service.description;
                if (iconElement && service.icon) {
                    iconElement.className = service.icon;
                }
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–∞—Ä—Ç–æ—á–∫—É
                serviceCards[index].style.display = 'block';
            }
        });
        
        // –°–∫—Ä—ã–≤–∞–µ–º –ª–∏—à–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏
        for (var i = validServices.length; i < serviceCards.length; i++) {
            serviceCards[i].style.display = 'none';
        }
    }
};

ContentUpdater.prototype.hideServicesSection = function() {
    var servicesGrid = document.querySelector('.services-grid');
    if (servicesGrid) {
        servicesGrid.style.display = 'none';
    }
};

ContentUpdater.prototype.showServicesSection = function() {
    var servicesGrid = document.querySelector('.services-grid');
    if (servicesGrid) {
        servicesGrid.style.display = 'grid';
    }
};

// –û—Å—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
ContentUpdater.prototype.applyContentChanges = function(content) {
    if (!content) return;

    // Hero section
    if (content.hero) {
        this.updateElement('#home h1, .hero h1', content.hero.title);
        this.updateElement('#home p, .hero p', content.hero.subtitle);
    }

    // About section
    if (content.about) {
        this.updateElement('#about .section-title', content.about.title);
        this.updateElement('.about-text p', content.about.description);
    }

    // Services section
    if (content.services) {
        this.updateElement('#services .section-title', content.services.title);
    }

    // Destinations section
    if (content.destinations) {
        this.updateElement('#destinations .section-title', content.destinations.title);
        this.updateElement('.destinations .section-subtitle', content.destinations.subtitle);
    }

    // Contact section
    if (content.contact) {
        this.updateElement('#contact .section-title', content.contact.title);
    }

    // Footer section
    if (content.footer) {
        this.updateElement('.footer-section:first-child p', content.footer.description);
        this.updateElement('.footer-bottom p', content.footer.copyright, true);
    }
};

ContentUpdater.prototype.applyContactChanges = function(contacts) {
    if (!contacts) return;

    // –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
    if (contacts.phone) {
        this.updateElement('.contact-info .contact-item:nth-child(1) p', contacts.phone);
        this.updateElement('.footer-section:nth-child(3) p:nth-child(1)', contacts.phone);
    }
    if (contacts.email) {
        this.updateElement('.contact-info .contact-item:nth-child(2) p', contacts.email);
        this.updateElement('.footer-section:nth-child(3) p:nth-child(2)', contacts.email);
    }
    if (contacts.address) {
        this.updateElement('.contact-info .contact-item:nth-child(3) p', contacts.address);
        this.updateElement('.footer-section:nth-child(3) p:nth-child(3)', contacts.address);
    }
    if (contacts.hours) {
        this.updateElement('.contact-info .contact-item:nth-child(4) p', contacts.hours);
        this.updateElement('.footer-section:nth-child(3) p:nth-child(4)', contacts.hours);
    }
};

ContentUpdater.prototype.applySettingsChanges = function(settings) {
    if (!settings) return;

    if (settings.siteTitle) {
        document.title = settings.siteTitle;
    }
};

ContentUpdater.prototype.updateElement = function(selector, content, isHTML) {
    var elements = document.querySelectorAll(selector);
    if (elements.length > 0) {
        elements.forEach(function(element) {
            if (isHTML) {
                element.innerHTML = content;
            } else {
                element.textContent = content;
            }
        });
    }
};

ContentUpdater.prototype.getDataHash = function(data) {
    return JSON.stringify({
        content: data.content,
        contacts: data.contacts,
        settings: data.settings,
        timestamp: data.lastUpdate
    });
};

// Initialize enhanced content updater
var contentUpdater = new ContentUpdater();



=== FILE: ./index-clean-preview-fixed.html ===
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WorldTravel - Clean Preview</title>
    <style>
        body { 
            margin: 0; 
            font-family: Arial, sans-serif; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }
        .container {
            padding: 40px;
            max-width: 600px;
        }
        h1 {
            font-size: 2.5em;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        p {
            font-size: 1.2em;
            margin-bottom: 30px;
            opacity: 0.9;
        }
        .badge {
            background: rgba(255,255,255,0.2);
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>WorldTravel</h1>
        <p>–ß–∏—Å—Ç–∞—è –≤–µ—Ä—Å–∏—è –¥–ª—è –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ</p>
        <div class="badge">‚úÖ –ë–µ–∑ blob –æ–ø–µ—Ä–∞—Ü–∏–π</div>
        <div class="badge" style="margin-top: 10px;">‚úÖ –ë–µ–∑ JavaScript –æ—à–∏–±–æ–∫</div>
        <div class="badge" style="margin-top: 10px;">‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞</div>
    </div>
    
    <!-- –ù–ò–ö–ê–ö–û–ì–û JavaScript - –∞–±—Å–æ–ª—é—Ç–Ω–æ —á–∏—Å—Ç–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ -->
</body>
</html>



=== FILE: ./blob-url-fixer.js ===
// Blob URL Fixer - –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å Blob URL –±–µ–∑ –Ω–∞—Ä—É—à–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞
function BlobUrlFixer() {
    this.fixedBlobs = new Set();
    this.init();
}

BlobUrlFixer.prototype.init = function() {
    console.log('üîß Blob URL Fixer initialized');
    
    // –ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ–º —Å–æ–∑–¥–∞–Ω–∏–µ Blob URL
    this.patchURLCreateObjectURL();
    
    // –ú–æ–Ω–∏—Ç–æ—Ä–∏–º –æ—à–∏–±–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
    this.monitorImageErrors();
    
    // –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö Blob URL
    setInterval(() => this.cleanupUnusedBlobs(), 60000); // –ö–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
};

// –ü–∞—Ç—á–∏–º URL.createObjectURL –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö Blob URL
BlobUrlFixer.prototype.patchURLCreateObjectURL = function() {
    const originalCreateObjectURL = URL.createObjectURL;
    const self = this;
    
    URL.createObjectURL = function(blob) {
        const blobUrl = originalCreateObjectURL.call(this, blob);
        console.log('üì∏ Blob URL created:', blobUrl);
        self.fixedBlobs.add(blobUrl);
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–µ–≤–æ–∫–∞–µ–º —á–µ—Ä–µ–∑ 5 –º–∏–Ω—É—Ç –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏
        setTimeout(() => {
            if (self.fixedBlobs.has(blobUrl)) {
                try {
                    URL.revokeObjectURL(blobUrl);
                    self.fixedBlobs.delete(blobUrl);
                    console.log('üßπ Blob URL automatically revoked:', blobUrl);
                } catch (e) {
                    console.warn('‚ö†Ô∏è Could not auto-revoke blob URL:', e);
                }
            }
        }, 300000); // 5 –º–∏–Ω—É—Ç
        
        return blobUrl;
    };
};

// –ú–æ–Ω–∏—Ç–æ—Ä–∏–º –æ—à–∏–±–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
BlobUrlFixer.prototype.monitorImageErrors = function() {
    document.addEventListener('error', (e) => {
        if (e.target.tagName === 'IMG') {
            const img = e.target;
            const src = img.src;
            
            if (src.startsWith('blob:')) {
                console.warn('‚ö†Ô∏è Blob URL image failed to load:', src);
                
                // –ó–∞–º–µ–Ω—è–µ–º –Ω–∞ placeholder —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —ç—Ç–æ Blob URL
                this.replaceBrokenBlobImage(img, src);
            }
        }
    }, true);
};

// –ó–∞–º–µ–Ω—è–µ–º –±–∏—Ç–æ–µ Blob –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
BlobUrlFixer.prototype.replaceBrokenBlobImage = function(imgElement, blobUrl) {
    try {
        // –†–µ–≤–æ–∫–∞–µ–º –±–∏—Ç—ã–π Blob URL
        if (this.fixedBlobs.has(blobUrl)) {
            URL.revokeObjectURL(blobUrl);
            this.fixedBlobs.delete(blobUrl);
        }
        
        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º placeholder
        imgElement.src = 'images/travel-placeholder.svg';
        imgElement.alt = '–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ';
        imgElement.style.opacity = '0.7';
        
        console.log('üîÑ Replaced broken blob image with placeholder');
        
    } catch (error) {
        console.error('Error replacing broken blob image:', error);
    }
};

// –û—á–∏—Å—Ç–∫–∞ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö Blob URL
BlobUrlFixer.prototype.cleanupUnusedBlobs = function() {
    const blobsToRemove = [];
    
    this.fixedBlobs.forEach(blobUrl => {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–∏ –µ—â–µ —ç—Ç–æ—Ç Blob URL –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
        const isUsed = Array.from(document.images).some(img => img.src === blobUrl);
        
        if (!isUsed) {
            blobsToRemove.push(blobUrl);
        }
    });
    
    // –†–µ–≤–æ–∫–∞–µ–º –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ Blob URL
    blobsToRemove.forEach(blobUrl => {
        try {
            URL.revokeObjectURL(blobUrl);
            this.fixedBlobs.delete(blobUrl);
            console.log('üßπ Cleaned up unused blob URL:', blobUrl);
        } catch (e) {
            console.warn('‚ö†Ô∏è Could not cleanup blob URL:', e);
        }
    });
    
    if (blobsToRemove.length > 0) {
        console.log(`üßπ Cleaned up ${blobsToRemove.length} unused blob URLs`);
    }
};

// –ì–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
window.addEventListener('error', function(e) {
    if (e.target.tagName === 'IMG' && e.target.src.startsWith('blob:')) {
        // –ü–æ–¥–∞–≤–ª—è–µ–º –≤—ã–≤–æ–¥ –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª—å –¥–ª—è Blob URL
        e.preventDefault();
        e.stopPropagation();
    }
}, true);

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ñ–∏–∫—Å–µ—Ä–∞
new BlobUrlFixer();

// –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –¥—Ä—É–≥–∏—Ö –º–æ–¥—É–ª—è—Ö
window.BlobUrlFixer = BlobUrlFixer;



=== FILE: ./universal-sync.js ===
// Universal sync - works with admin, editor, and all data sources
(function() {
    'use strict';
    
    console.log('üåê Universal sync loaded');
    
    let lastSyncHash = '';
    let isSyncing = false;
    
    function syncFromAllSources() {
        if (isSyncing) return;
        isSyncing = true;
        
        try {
            // Try multiple data sources in order
            let finalData = null;
            
            // 1. Try localStorage (main source)
            const localData = localStorage.getItem('worldtravel_data');
            if (localData) {
                try {
                    finalData = JSON.parse(localData);
                    console.log('üìÅ Data from localStorage');
                } catch (e) {
                    console.log('‚ùå localStorage data corrupted');
                }
            }
            
            // 2. Try dataManager if available
            if (!finalData && window.dataManager && window.dataManager.getData) {
                try {
                    finalData = window.dataManager.getData();
                    console.log('üìä Data from dataManager');
                } catch (e) {
                    console.log('‚ùå dataManager error');
                }
            }
            
            // 3. Try sessionStorage as fallback
            if (!finalData) {
                const sessionData = sessionStorage.getItem('worldtravel_data');
                if (sessionData) {
                    try {
                        finalData = JSON.parse(sessionData);
                        console.log('üíæ Data from sessionStorage');
                    } catch (e) {
                        console.log('‚ùå sessionStorage data corrupted');
                    }
                }
            }
            
            if (!finalData) {
                console.log('ÔøΩÔøΩ No data found from any source');
                isSyncing = false;
                return;
            }
            
            // Check if data actually changed
            const dataString = JSON.stringify(finalData);
            const currentHash = dataString.length + '-' + dataString.substring(100, 150);
            
            if (currentHash === lastSyncHash) {
                isSyncing = false;
                return; // No changes
            }
            
            lastSyncHash = currentHash;
            console.log('üîÑ Applying changes to page...');
            
            // APPLY ALL CHANGES
            applyDataToPage(finalData);
            
            console.log('‚úÖ Page updated successfully!');
            
        } catch (error) {
            console.log('‚ùå Sync error:', error);
        }
        
        isSyncing = false;
    }
    
    function applyDataToPage(data) {
        // 1. APPLY CONTACTS
        if (data.contacts) {
            applyContacts(data.contacts);
        }
        
        // 2. APPLY FOOTER
        if (data.footer) {
            applyFooter(data.footer);
        }
        
        // 3. APPLY CONTENT SECTIONS
        if (data.content) {
            applyContent(data.content);
        }
        
        // 4. APPLY NAVIGATION
        if (data.content) {
            applyNavigation(data.content);
        }
        
        // 5. APPLY SETTINGS
        if (data.settings) {
            applySettings(data.settings);
        }
    }
    
    function applyContacts(contacts) {
        const contactMap = [
            { selectors: ['.contact-info .contact-item:nth-child(1) p', '.footer-section:nth-child(3) p:nth-child(1)'], value: contacts.phone },
            { selectors: ['.contact-info .contact-item:nth-child(2) p', '.footer-section:nth-child(3) p:nth-child(2)'], value: contacts.email },
            { selectors: ['.contact-info .contact-item:nth-child(3) p', '.footer-section:nth-child(3) p:nth-child(3)'], value: contacts.address },
            { selectors: ['.contact-info .contact-item:nth-child(4) p', '.footer-section:nth-child(3) p:nth-child(4)'], value: contacts.hours }
        ];
        
        contactMap.forEach(item => {
            if (item.value) {
                item.selectors.forEach(selector => {
                    document.querySelectorAll(selector).forEach(el => {
                        el.textContent = item.value;
                    });
                });
            }
        });
    }
    
    function applyFooter(footer) {
        if (footer.description) {
            document.querySelectorAll('.footer-section:first-child p').forEach(el => {
                el.textContent = footer.description;
            });
        }
        if (footer.copyright) {
            document.querySelectorAll('.footer-bottom p').forEach(el => {
                el.innerHTML = footer.copyright;
            });
        }
    }
    
    function applyContent(content) {
        // Hero section
        if (content.hero) {
            updateText('#home h1, .hero h1', content.hero.title);
            updateText('#home p, .hero p', content.hero.subtitle);
        }
        
        // About section
        if (content.about) {
            updateText('#about .section-title', content.about.title);
            updateText('.about-text p', content.about.description);
        }
        
        // Services section
        if (content.services) {
            updateText('#services .section-title', content.services.title);
        }
        
        // Destinations section
        if (content.destinations) {
            updateText('#destinations .section-title', content.destinations.title);
            updateText('.destinations .section-subtitle', content.destinations.subtitle);
        }
        
        // Contact section
        if (content.contact) {
            updateText('#contact .section-title', content.contact.title);
        }
    }
    
    function applyNavigation(content) {
        const navMap = [
            { href: '#about', title: content.about?.title },
            { href: '#services', title: content.services?.title },
            { href: '#destinations', title: content.destinations?.title },
            { href: '#contact', title: content.contact?.title }
        ];
        
        navMap.forEach(item => {
            if (item.title) {
                // Update both header and footer navigation
                updateText(`.nav-links a[href="${item.href}"]`, item.title);
                updateText(`.footer-section:nth-child(2) a[href="${item.href}"]`, item.title);
            }
        });
    }
    
    function applySettings(settings) {
        if (settings.siteTitle) {
            document.title = settings.siteTitle;
        }
    }
    
    function updateText(selector, value) {
        if (!value) return;
        document.querySelectorAll(selector).forEach(el => {
            el.textContent = value;
        });
    }
    
    // SYNC STRATEGY
    function startSync() {
        // Fast sync for first 10 seconds
        let fastSync = setInterval(syncFromAllSources, 300);
        setTimeout(() => {
            clearInterval(fastSync);
            // Then normal sync
            setInterval(syncFromAllSources, 1000);
        }, 10000);
        
        // Also sync on any storage event
        window.addEventListener('storage', function(e) {
            if (e.key === 'worldtravel_data' || e.key === 'admin_data') {
                setTimeout(syncFromAllSources, 100);
            }
        });
        
        // Sync on page focus (when returning from admin)
        window.addEventListener('focus', syncFromAllSources);
        
        // Sync on visibility change
        document.addEventListener('visibilitychange', function() {
            if (!document.hidden) {
                syncFromAllSources();
            }
        });
        
        console.log('‚úÖ Universal sync started');
    }
    
    // Start when DOM is ready
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', startSync);
    } else {
        startSync();
    }
    
    // Make sync function available globally
    window.forceSync = syncFromAllSources;
    
})();



=== FILE: ./fix-editor-html-generation.js ===
// Fix the HTML generation in the editor to prevent overflow
function fixEditorHTMLGeneration() {
    console.log('üîß Fixing editor HTML generation...');
    
    // Patch the services editor method to generate better HTML
    if (window.editor && window.editor.addFixedServicesEditor) {
        const originalAddServices = window.editor.addFixedServicesEditor;
        
        window.editor.addFixedServicesEditor = function() {
            const contentEditor = document.getElementById('content-editor');
            if (!contentEditor) return;

            const services = this.currentData.content?.services?.services || [];
            
            // Generate fixed HTML without problematic flex:1
            const html = '<div class="working-services-editor" style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin: 20px 0; width: 100%; max-width: 100%; box-sizing: border-box; overflow: hidden;">' +
                '<h4 style="color: #2c5aa0; margin-bottom: 15px;">üéØ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Å–ª—É–≥–∞–º–∏</h4>' +
                '<div style="color: #666; margin-bottom: 15px; padding: 10px; background: white; border-radius: 5px;">' +
                'üí° –î–æ–±–∞–≤–ª—è–π—Ç–µ —É—Å–ª—É–≥–∏ –∫–æ–º–ø–∞–Ω–∏–∏. –ö–∞–∂–¥–∞—è —É—Å–ª—É–≥–∞ –¥–æ–ª–∂–Ω–∞ –∏–º–µ—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ.' +
                '</div>' +
                '<div id="working-services-list" style="width: 100%;">' +
                (services.length > 0 ? services.map((service, index) => 
                    '<div class="service-item" style="margin-bottom: 15px; padding: 15px; background: white; border-radius: 8px; border: 1px solid #e9ecef; width: 100%; max-width: 100%; box-sizing: border-box;">' +
                    '<div style="display: flex; gap: 10px; margin-bottom: 10px; flex-wrap: wrap; align-items: center; width: 100%;">' +
                    '<input type="text" value="' + (service.title || '') + '" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —É—Å–ª—É–≥–∏" ' +
                    'oninput="window.editor.updateServiceData(' + index + ', \\'title\\', this.value)" ' +
                    'style="flex: 1; min-width: 150px; max-width: 200px; padding: 8px 12px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px; box-sizing: border-box;">' +
                    '<input type="text" value="' + (service.icon || 'fas fa-star') + '" placeholder="–ò–∫–æ–Ω–∫–∞" ' +
                    'oninput="window.editor.updateServiceData(' + index + ', \\'icon\\', this.value)" ' +
                    'style="flex: 1; min-width: 120px; max-width: 180px; padding: 8px 12px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px; box-sizing: border-box;">' +
                    '<button onclick="window.editor.removeServiceData(' + index + ')" ' +
                    'style="background: #dc3545; color: white; border: none; padding: 8px 12px; border-radius: 4px; cursor: pointer; font-size: 12px; white-space: nowrap; flex-shrink: 0; min-width: 60px;">' +
                    '<i class="fas fa-trash"></i> –£–¥–∞–ª–∏—Ç—å' +
                    '</button>' +
                    '</div>' +
                    '<textarea placeholder="–û–ø–∏—Å–∞–Ω–∏–µ —É—Å–ª—É–≥–∏" ' +
                    'oninput="window.editor.updateServiceData(' + index + ', \\'description\\', this.value)" ' +
                    'style="width: 100%; min-height: 80px; padding: 8px 12px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px; resize: vertical; box-sizing: border-box; max-width: 100%;">' + (service.description || '') + '</textarea>' +
                    '</div>'
                ).join('') : '<div style="text-align: center; color: #666; padding: 20px;">–£—Å–ª—É–≥–∏ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã</div>') +
                '</div>' +
                '<button onclick="window.editor.addServiceData()" ' +
                'style="background: #28a745; color: white; border: none; padding: 10px 15px; border-radius: 5px; cursor: pointer; margin-top: 10px; width: 100%; max-width: 100%; box-sizing: border-box;">' +
                '<i class="fas fa-plus"></i> –î–æ–±–∞–≤–∏—Ç—å —É—Å–ª—É–≥—É' +
                '</button>' +
                '</div>';

            const titleField = contentEditor.querySelector('[data-field="title"]');
            if (titleField) {
                titleField.closest('.form-group').insertAdjacentHTML('afterend', html);
            }
        };
        
        console.log('‚úÖ Services editor HTML generation fixed');
    }
    
    // Also patch stats editor
    if (window.editor && window.editor.addFixedStatsEditor) {
        const originalAddStats = window.editor.addFixedStatsEditor;
        
        window.editor.addFixedStatsEditor = function() {
            const contentEditor = document.getElementById('content-editor');
            if (!contentEditor) return;

            const stats = this.currentData.content?.about?.stats || [];
            
            const html = '<div class="working-stats-editor" style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin: 20px 0; width: 100%; max-width: 100%; box-sizing: border-box; overflow: hidden;">' +
                '<h4 style="color: #2c5aa0; margin-bottom: 15px;">üìä –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π</h4>' +
                '<div style="color: #666; margin-bottom: 15px; padding: 10px; background: white; border-radius: 5px;">' +
                'üí° –î–æ–±–∞–≤–ª—è–π—Ç–µ –±–ª–æ–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏. –ü—É—Å—Ç—ã–µ –±–ª–æ–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫—Ä—ã–≤–∞—é—Ç—Å—è.' +
                '</div>' +
                '<div id="working-stats-list" style="width: 100%;">' +
                (stats.length > 0 ? stats.map((stat, index) => 
                    '<div style="display: flex; gap: 10px; margin-bottom: 10px; align-items: center; flex-wrap: wrap; width: 100%; max-width: 100%;">' +
                    '<input type="text" value="' + (stat.value || '') + '" placeholder="–ó–Ω–∞—á–µ–Ω–∏–µ" ' +
                    'oninput="window.editor.updateStatData(' + index + ', \\'value\\', this.value)" ' +
                    'style="flex: 1; min-width: 80px; max-width: 100px; padding: 8px 12px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px; box-sizing: border-box;">' +
                    '<input type="text" value="' + (stat.label || '') + '" placeholder="–ü–æ–¥–ø–∏—Å—å" ' +
                    'oninput="window.editor.updateStatData(' + index + ', \\'label\\', this.value)" ' +
                    'style="flex: 2; min-width: 120px; max-width: 200px; padding: 8px 12px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px; box-sizing: border-box;">' +
                    '<button onclick="window.editor.removeStatData(' + index + ')" ' +
                    'style="background: #dc3545; color: white; border: none; padding: 8px 12px; border-radius: 4px; cursor: pointer; font-size: 12px; white-space: nowrap; flex-shrink: 0; min-width: 60px;">' +
                    '<i class="fas fa-trash"></i>' +
                    '</button>' +
                    '</div>'
                ).join('') : '<div style="text-align: center; color: #666; padding: 20px;">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω–∞</div>') +
                '</div>' +
                '<button onclick="window.editor.addStatData()" ' +
                'style="background: #28a745; color: white; border: none; padding: 10px 15px; border-radius: 5px; cursor: pointer; margin-top: 10px; width: 100%; max-width: 100%; box-sizing: border-box;">' +
                '<i class="fas fa-plus"></i> –î–æ–±–∞–≤–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É' +
                '</button>' +
                '</div>';

            const descriptionField = contentEditor.querySelector('[data-field="description"]');
            if (descriptionField) {
                descriptionField.closest('.form-group').insertAdjacentHTML('afterend', html);
            }
        };
        
        console.log('‚úÖ Stats editor HTML generation fixed');
    }
}

// Initialize when editor is available
const initEditorFix = () => {
    if (window.editor) {
        fixEditorHTMLGeneration();
    } else {
        setTimeout(initEditorFix, 100);
    }
};

if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initEditorFix);
} else {
    initEditorFix();
}



=== FILE: ./super-editor.js ===
// Simple and Effective Super Editor
class SuperEditor {
    constructor() {
        this.init();
    }

    init() {
        console.log('üöÄ Super Editor initialized');
        this.waitForEditor();
    }

    waitForEditor() {
        if (window.editor) {
            this.patchEditor();
        } else {
            setTimeout(() => this.waitForEditor(), 100);
        }
    }

    patchEditor() {
        console.log('üîß Patching editor...');
        
        // Patch showContentEditor to add enhanced features
        const originalShowContentEditor = window.editor.showContentEditor;
        window.editor.showContentEditor = function() {
            originalShowContentEditor.call(this);
            setTimeout(() => this.addEnhancedFeatures(), 50);
        };

        // Add enhanced features method
        window.editor.addEnhancedFeatures = function() {
            this.addImageManager();
            this.addStatsManager();
            this.addServicesManager();
            this.addContactManager();
        };

        // Image Manager
        window.editor.addImageManager = function() {
            const imageFields = this.currentSection.fields?.filter(f => f.type === 'image');
            if (!imageFields || imageFields.length === 0) return;

            imageFields.forEach(field => {
                this.addImageField(field);
            });
        };

        window.editor.addImageField = function(field) {
            const contentEditor = document.getElementById('content-editor');
            if (!contentEditor) return;

            const existingManager = contentEditor.querySelector(`[data-image-field="${field.id}"]`);
            if (existingManager) return;

            const currentImage = this.getCurrentValue(field);
            const imageHTML = `
                <div class="form-group" data-image-field="${field.id}">
                    <label>${field.label}:</label>
                    <div class="image-manager" style="margin: 10px 0;">
                        <div class="image-preview" style="width: 100%; max-width: 300px; height: 200px; border: 2px dashed #ddd; border-radius: 8px; display: flex; align-items: center; justify-content: center; margin-bottom: 10px; overflow: hidden; background: #f8f9fa;">
                            ${currentImage ? 
                                `<img src="${currentImage}" alt="Preview" style="max-width: 100%; max-height: 100%; object-fit: cover;">` :
                                `<div style="text-align: center; color: #666;">
                                    <i class="fas fa-image" style="font-size: 2em; display: block; margin-bottom: 5px;"></i>
                                    <span>No image</span>
                                </div>`
                            }
                        </div>
                        <div style="display: flex; gap: 10px;">
                            <button type="button" class="btn-admin" onclick="window.editor.uploadImage('${field.id}')" style="background: #17a2b8;">
                                <i class="fas fa-upload"></i> Upload
                            </button>
                            <button type="button" class="btn-admin" onclick="window.editor.setImageUrl('${field.id}')" style="background: #6c757d;">
                                <i class="fas fa-link"></i> URL
                            </button>
                            ${currentImage ? `
                            <button type="button" class="btn-admin danger" onclick="window.editor.removeImage('${field.id}')" style="background: #dc3545;">
                                <i class="fas fa-trash"></i> Remove
                            </button>
                            ` : ''}
                        </div>
                        <input type="hidden" data-field="${field.id}" value="${currentImage || ''}">
                    </div>
                </div>
            `;

            // Insert after title field
            const titleField = contentEditor.querySelector('[data-field="title"]');
            if (titleField) {
                titleField.closest('.form-group').insertAdjacentHTML('afterend', imageHTML);
            }
        };

        // Image methods
        window.editor.uploadImage = function(fieldId) {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = 'image/*';
            input.onchange = (e) => {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        this.updateImageField(fieldId, e.target.result);
                    };
                    reader.readAsDataURL(file);
                }
            };
            input.click();
        };

        window.editor.setImageUrl = function(fieldId) {
            const url = prompt('Enter image URL:');
            if (url) {
                this.updateImageField(fieldId, url);
            }
        };

        window.editor.removeImage = function(fieldId) {
            if (confirm('Remove image?')) {
                this.updateImageField(fieldId, '');
            }
        };

        window.editor.updateImageField = function(fieldId, url) {
            const field = document.querySelector(`[data-field="${fieldId}"]`);
            if (field) {
                field.value = url;
                
                const preview = document.querySelector(`[data-image-field="${fieldId}"] .image-preview`);
                if (preview) {
                    if (url) {
                        preview.innerHTML = `<img src="${url}" alt="Preview" style="max-width: 100%; max-height: 100%; object-fit: cover;">`;
                    } else {
                        preview.innerHTML = `
                            <div style="text-align: center; color: #666;">
                                <i class="fas fa-image" style="font-size: 2em; display: block; margin-bottom: 5px;"></i>
                                <span>No image</span>
                            </div>
                        `;
                    }
                }
                
                this.hasUnsavedChanges = true;
            }
        };

        // Stats Manager for About section
        window.editor.addStatsManager = function() {
            if (this.currentSection.id !== 'about') return;

            const contentEditor = document.getElementById('content-editor');
            if (!contentEditor) return;

            const stats = this.currentData.content?.about?.stats || [];
            
            const statsHTML = `
                <div class="stats-manager" style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0;">
                    <h4 style="color: #2c5aa0; margin-bottom: 15px;">üìä Statistics Blocks</h4>
                    <div id="stats-list">
                        ${stats.map((stat, index) => `
                            <div class="stat-item" style="display: flex; gap: 10px; margin-bottom: 10px; align-items: center;">
                                <input type="text" value="${stat.value}" placeholder="Value" 
                                       onchange="window.editor.updateStat(${index}, 'value', this.value)" 
                                       style="flex: 1; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                                <input type="text" value="${stat.label}" placeholder="Label" 
                                       onchange="window.editor.updateStat(${index}, 'label', this.value)"
                                       style="flex: 2; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                                <button onclick="window.editor.removeStat(${index})" 
                                        style="background: #dc3545; color: white; border: none; padding: 8px 12px; border-radius: 4px; cursor: pointer;">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        `).join('')}
                    </div>
                    <button onclick="window.editor.addStat()" 
                            style="background: #28a745; color: white; border: none; padding: 10px 15px; border-radius: 5px; cursor: pointer; margin-top: 10px;">
                        <i class="fas fa-plus"></i> Add Statistic
                    </button>
                </div>
            `;

            const descriptionField = contentEditor.querySelector('[data-field="description"]');
            if (descriptionField) {
                descriptionField.closest('.form-group').insertAdjacentHTML('afterend', statsHTML);
            }
        };

        // Stats methods
        window.editor.addStat = function() {
            if (!this.currentData.content.about) this.currentData.content.about = {};
            if (!this.currentData.content.about.stats) this.currentData.content.about.stats = [];
            
            this.currentData.content.about.stats.push({
                value: '0',
                label: 'New Stat'
            });
            
            this.hasUnsavedChanges = true;
            this.showContentEditor();
        };

        window.editor.updateStat = function(index, field, value) {
            if (!this.currentData.content.about) this.currentData.content.about = {};
            if (!this.currentData.content.about.stats) this.currentData.content.about.stats = [];
            
            if (!this.currentData.content.about.stats[index]) {
                this.currentData.content.about.stats[index] = {};
            }
            
            this.currentData.content.about.stats[index][field] = value;
            this.hasUnsavedChanges = true;
        };

        window.editor.removeStat = function(index) {
            if (this.currentData.content?.about?.stats?.[index]) {
                this.currentData.content.about.stats.splice(index, 1);
                this.hasUnsavedChanges = true;
                this.showContentEditor();
            }
        };

        // Services Manager
        window.editor.addServicesManager = function() {
            if (this.currentSection.id !== 'services') return;

            const contentEditor = document.getElementById('content-editor');
            if (!contentEditor) return;

            const services = this.currentData.content?.services?.services || [];
            
            const servicesHTML = `
                <div class="services-manager" style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0;">
                    <h4 style="color: #2c5aa0; margin-bottom: 15px;">üéØ Services</h4>
                    <div id="services-list">
                        ${services.map((service, index) => `
                            <div class="service-item" style="margin-bottom: 15px; padding: 15px; background: white; border-radius: 6px; border: 1px solid #ddd;">
                                <div style="display: flex; gap: 10px; margin-bottom: 10px;">
                                    <input type="text" value="${service.title}" placeholder="Service Title" 
                                           onchange="window.editor.updateService(${index}, 'title', this.value)"
                                           style="flex: 1; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                                    <input type="text" value="${service.icon}" placeholder="Icon (fas fa-...)" 
                                           onchange="window.editor.updateService(${index}, 'icon', this.value)"
                                           style="flex: 1; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                                </div>
                                <textarea onchange="window.editor.updateService(${index}, 'description', this.value)"
                                          style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; resize: vertical; min-height: 60px;"
                                          placeholder="Service description">${service.description}</textarea>
                                <button onclick="window.editor.removeService(${index})" 
                                        style="background: #dc3545; color: white; border: none; padding: 6px 10px; border-radius: 4px; cursor: pointer; margin-top: 10px;">
                                    <i class="fas fa-trash"></i> Remove Service
                                </button>
                            </div>
                        `).join('')}
                    </div>
                    <button onclick="window.editor.addService()" 
                            style="background: #28a745; color: white; border: none; padding: 10px 15px; border-radius: 5px; cursor: pointer; margin-top: 10px;">
                        <i class="fas fa-plus"></i> Add Service
                    </button>
                </div>
            `;

            const titleField = contentEditor.querySelector('[data-field="title"]');
            if (titleField) {
                titleField.closest('.form-group').insertAdjacentHTML('afterend', servicesHTML);
            }
        };

        // Services methods
        window.editor.addService = function() {
            if (!this.currentData.content.services) this.currentData.content.services = {};
            if (!this.currentData.content.services.services) this.currentData.content.services.services = [];
            
            this.currentData.content.services.services.push({
                title: 'New Service',
                description: 'Service description',
                icon: 'fas fa-star'
            });
            
            this.hasUnsavedChanges = true;
            this.showContentEditor();
        };

        window.editor.updateService = function(index, field, value) {
            if (!this.currentData.content.services) this.currentData.content.services = {};
            if (!this.currentData.content.services.services) this.currentData.content.services.services = [];
            
            if (!this.currentData.content.services.services[index]) {
                this.currentData.content.services.services[index] = {};
            }
            
            this.currentData.content.services.services[index][field] = value;
            this.hasUnsavedChanges = true;
        };

        window.editor.removeService = function(index) {
            if (this.currentData.content?.services?.services?.[index]) {
                this.currentData.content.services.services.splice(index, 1);
                this.hasUnsavedChanges = true;
                this.showContentEditor();
            }
        };

        // Contact Manager
        window.editor.addContactManager = function() {
            if (this.currentSection.id !== 'contact') return;

            const contentEditor = document.getElementById('content-editor');
            if (!contentEditor) return;

            const contacts = this.currentData.contacts || {};
            
            const contactHTML = `
                <div class="contact-manager" style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0;">
                    <h4 style="color: #2c5aa0; margin-bottom: 15px;">üìû Contact Information</h4>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                        <div>
                            <label>Phone:</label>
                            <input type="text" value="${contacts.phone || ''}" 
                                   onchange="window.editor.updateContact('phone', this.value)"
                                   placeholder="+7 (999) 123-45-67"
                                   style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                        </div>
                        <div>
                            <label>Email:</label>
                            <input type="email" value="${contacts.email || ''}" 
                                   onchange="window.editor.updateContact('email', this.value)"
                                   placeholder="info@worldtravel.com"
                                   style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                        </div>
                        <div>
                            <label>Address:</label>
                            <input type="text" value="${contacts.address || ''}" 
                                   onchange="window.editor.updateContact('address', this.value)"
                                   placeholder="–ú–æ—Å–∫–≤–∞, —É–ª. –¢—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∞—è, 15"
                                   style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                        </div>
                        <div>
                            <label>Working Hours:</label>
                            <input type="text" value="${contacts.hours || ''}" 
                                   onchange="window.editor.updateContact('hours', this.value)"
                                   placeholder="–ü–Ω-–ü—Ç: 9:00-18:00"
                                   style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                        </div>
                    </div>
                </div>
            `;

            const titleField = contentEditor.querySelector('[data-field="title"]');
            if (titleField) {
                titleField.closest('.form-group').insertAdjacentHTML('afterend', contactHTML);
            }
        };

        // Contact methods
        window.editor.updateContact = function(field, value) {
            if (!this.currentData.contacts) this.currentData.contacts = {};
            this.currentData.contacts[field] = value;
            this.hasUnsavedChanges = true;
        };

        console.log('‚úÖ Editor patched successfully');
    }
}

// Initialize
new SuperEditor();



=== FILE: ./patch-service-editor.js ===
// Patch the service editor to generate better HTML
function patchServiceEditor() {
    console.log('üîÑ Patching service editor HTML generation...');
    
    const checkEditor = () => {
        if (window.editor && window.editor.addFixedServicesEditor) {
            // Store original method
            const originalAddServices = window.editor.addFixedServicesEditor;
            
            // Patch method
            window.editor.addFixedServicesEditor = function() {
                originalAddServices.call(this);
                
                // Wait for services to render
                setTimeout(() => {
                    document.querySelectorAll('.service-item').forEach(serviceItem => {
                        // Apply the same fixes to newly created items
                        serviceItem.style.maxWidth = '100%';
                        serviceItem.style.overflow = 'hidden';
                        serviceItem.style.boxSizing = 'border-box';
                        
                        const flexContainer = serviceItem.querySelector('div[style*="display: flex"]');
                        if (flexContainer) {
                            flexContainer.style.display = 'flex';
                            flexContainer.style.flexWrap = 'wrap';
                            flexContainer.style.gap = '8px';
                            flexContainer.style.alignItems = 'center';
                            flexContainer.style.maxWidth = '100%';
                            
                            const inputs = flexContainer.querySelectorAll('input[type="text"]');
                            if (inputs.length >= 2) {
                                inputs[0].style.flex = '1 1 150px';
                                inputs[0].style.minWidth = '120px';
                                inputs[0].style.maxWidth = 'calc(50% - 30px)';
                                inputs[0].style.width = 'auto';
                                inputs[0].style.boxSizing = 'border-box';
                                
                                inputs[1].style.flex = '1 1 120px';
                                inputs[1].style.minWidth = '100px';
                                inputs[1].style.maxWidth = 'calc(30% - 30px)';
                                inputs[1].style.width = 'auto';
                                inputs[1].style.boxSizing = 'border-box';
                            }
                            
                            const button = flexContainer.querySelector('button');
                            if (button) {
                                button.style.flexShrink = '0';
                                button.style.minWidth = '40px';
                                button.style.maxWidth = '60px';
                                button.style.width = 'auto';
                                button.style.boxSizing = 'border-box';
                            }
                        }
                        
                        const textarea = serviceItem.querySelector('textarea');
                        if (textarea) {
                            textarea.style.maxWidth = '100%';
                            textarea.style.width = '100%';
                            textarea.style.boxSizing = 'border-box';
                        }
                    });
                }, 200);
            };
            
            console.log('‚úÖ Service editor HTML generation patched');
        } else {
            setTimeout(checkEditor, 100);
        }
    };
    
    checkEditor();
}

// Initialize
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', patchServiceEditor);
} else {
    patchServiceEditor();
}



=== FILE: ./bulletproof-sync.js ===
// Bulletproof sync - absolutely guaranteed to work
(function() {
    'use strict';
    
    console.log('üéØ BULLETPROOF SYNC LOADED');
    
    let lastSuccessData = null;
    
    function bulletproofSync() {
        try {
            console.log('üîÑ Checking for data updates...');
            
            // Get data from localStorage
            const rawData = localStorage.getItem('worldtravel_data');
            if (!rawData) {
                console.log('üì≠ No data in localStorage');
                return;
            }
            
            // Parse data
            let data;
            try {
                data = JSON.parse(rawData);
            } catch (e) {
                console.log('‚ùå Data parsing failed');
                return;
            }
            
            // Check if data is different from last success
            if (lastSuccessData && JSON.stringify(data) === JSON.stringify(lastSuccessData)) {
                console.log('üìã No data changes detected');
                return; // No changes
            }
            
            console.log('üîÑ APPLYING DATA TO PAGE...', data);
            
            // APPLY CONTACTS
            if (data.contacts) {
                console.log('üìû Applying contacts:', data.contacts);
                
                // Phone
                updateElements('.contact-info .contact-item:nth-child(1) p', data.contacts.phone);
                updateElements('.footer-section:nth-child(3) p:nth-child(1)', data.contacts.phone);
                
                // Email
                updateElements('.contact-info .contact-item:nth-child(2) p', data.contacts.email);
                updateElements('.footer-section:nth-child(3) p:nth-child(2)', data.contacts.email);
                
                // Address
                updateElements('.contact-info .contact-item:nth-child(3) p', data.contacts.address);
                updateElements('.footer-section:nth-child(3) p:nth-child(3)', data.contacts.address);
                
                // Hours
                updateElements('.contact-info .contact-item:nth-child(4) p', data.contacts.hours);
                updateElements('.footer-section:nth-child(3) p:nth-child(4)', data.contacts.hours);
            }
            
            // APPLY FOOTER
            if (data.footer) {
                console.log('üè† Applying footer:', data.footer);
                updateElements('.footer-section:first-child p', data.footer.description);
                updateElementsHTML('.footer-bottom p', data.footer.copyright);
            }
            
            // APPLY CONTENT SECTIONS
            if (data.content) {
                console.log('üìÑ Applying content:', Object.keys(data.content));
                
                // About
                if (data.content.about) {
                    updateElements('#about .section-title', data.content.about.title);
                    updateElements('.about-text p', data.content.about.description);
                }
                
                // Services
                if (data.content.services) {
                    updateElements('#services .section-title', data.content.services.title);
                }
                
                // Destinations
                if (data.content.destinations) {
                    updateElements('#destinations .section-title', data.content.destinations.title);
                    updateElements('.destinations .section-subtitle', data.content.destinations.subtitle);
                }
                
                // Contact
                if (data.content.contact) {
                    updateElements('#contact .section-title', data.content.contact.title);
                }
                
                // Hero
                if (data.content.hero) {
                    updateElements('#home h1', data.content.hero.title);
                    updateElements('#home p', data.content.hero.subtitle);
                }
            }
            
            // APPLY NAVIGATION
            if (data.content) {
                console.log('üß≠ Applying navigation');
                updateNavLink('#about', data.content.about?.title);
                updateNavLink('#services', data.content.services?.title);
                updateNavLink('#destinations', data.content.destinations?.title);
                updateNavLink('#contact', data.content.contact?.title);
            }
            
            lastSuccessData = data;
            console.log('‚úÖ PAGE UPDATED SUCCESSFULLY!');
            
        } catch (error) {
            console.log('‚ùå Sync error:', error);
        }
    }
    
    function updateElements(selector, value) {
        if (!value) return;
        const elements = document.querySelectorAll(selector);
        elements.forEach(el => {
            if (el.textContent !== value) {
                el.textContent = value;
                console.log('‚úÖ Updated:', selector, 'to:', value);
            }
        });
        if (elements.length === 0) {
            console.log('‚ö†Ô∏è No elements found for:', selector);
        }
    }
    
    function updateElementsHTML(selector, value) {
        if (!value) return;
        const elements = document.querySelectorAll(selector);
        elements.forEach(el => {
            if (el.innerHTML !== value) {
                el.innerHTML = value;
                console.log('‚úÖ Updated HTML:', selector, 'to:', value);
            }
        });
    }
    
    function updateNavLink(href, title) {
        if (!title) return;
        
        // Header nav
        updateElements(`.nav-links a[href="${href}"]`, title);
        
        // Footer nav
        updateElements(`.footer-section:nth-child(2) a[href="${href}"]`, title);
    }
    
    // AGGRESSIVE SYNC STRATEGY
    function startBulletproofSync() {
        console.log('üöÄ Starting bulletproof sync...');
        
        // Sync immediately
        bulletproofSync();
        
        // Very fast sync for first 30 seconds
        const fastInterval = setInterval(bulletproofSync, 100);
        setTimeout(() => {
            clearInterval(fastInterval);
            // Continue with fast sync
            setInterval(bulletproofSync, 500);
        }, 30000);
        
        // Sync on every possible event
        window.addEventListener('storage', bulletproofSync);
        window.addEventListener('focus', bulletproofSync);
        window.addEventListener('load', bulletproofSync);
        document.addEventListener('visibilitychange', bulletproofSync);
        
        console.log('‚úÖ Bulletproof sync activated');
    }
    
    // START IMMEDIATELY
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', startBulletproofSync);
    } else {
        startBulletproofSync();
    }
    
    // Global function to force sync
    window.forceBulletproofSync = bulletproofSync;
    window.bulletproofSync = bulletproofSync;
    
    console.log('‚úÖ Bulletproof sync functions registered');
    
})();



=== FILE: ./page-editor.css ===
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #f5f5f5;
    height: 100vh;
}

.editor-container {
    display: flex;
    height: 100vh;
}

.preview-panel {
    flex: 1;
    background: white;
    border-right: 2px solid #e0e0e0;
    display: flex;
    flex-direction: column;
}

.preview-header {
    padding: 20px;
    border-bottom: 1px solid #e0e0e0;
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: #fafafa;
}

.page-preview {
    flex: 1;
    padding: 20px;
    overflow-y: auto;
}

.editor-panel {
    width: 400px;
    background: white;
    border-left: 2px solid #e0e0e0;
    display: none;
    flex-direction: column;
}

.editor-panel.active {
    display: flex;
}

.editor-header {
    padding: 20px;
    border-bottom: 1px solid #e0e0e0;
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: #fafafa;
}

.editor-content {
    flex: 1;
    padding: 20px;
    overflow-y: auto;
}

.editor-placeholder {
    text-align: center;
    color: #666;
    padding: 40px 20px;
}

.content-block {
    border: 2px solid transparent;
    border-radius: 8px;
    padding: 20px;
    margin-bottom: 20px;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
}

.content-block:hover {
    border-color: #007bff;
    background: #f8f9fa;
}

.content-block.selected {
    border-color: #007bff;
    background: #e3f2fd;
}

.block-text {
    background: #f8f9fa;
}

.block-image {
    background: #fff3cd;
}

.block-hero {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 60px 20px;
    text-align: center;
}

.block-features {
    background: #d1ecf1;
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 20px;
}

.block-cta {
    background: #d4edda;
    text-align: center;
    padding: 40px 20px;
}

.form-group {
    margin-bottom: 20px;
}

.form-group label {
    display: block;
    margin-bottom: 5px;
    font-weight: 500;
    color: #333;
}

.form-group input,
.form-group textarea,
.form-group select {
    width: 100%;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 4px;
    font-size: 14px;
}

.form-group textarea {
    min-height: 100px;
    resize: vertical;
}

.image-upload {
    border: 2px dashed #ddd;
    padding: 20px;
    text-align: center;
    border-radius: 4px;
    cursor: pointer;
}

.image-upload:hover {
    border-color: #007bff;
}

.btn-primary {
    background: #007bff;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 14px;
}

.btn-primary:hover {
    background: #0056b3;
}

.btn-secondary {
    background: #6c757d;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 14px;
}

.btn-secondary:hover {
    background: #545b62;
}

.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.5);
    z-index: 1000;
}

.modal.active {
    display: flex;
    justify-content: center;
    align-items: center;
}

.modal-content {
    background: white;
    padding: 0;
    border-radius: 8px;
    width: 500px;
    max-width: 90%;
}

.modal-header {
    padding: 20px;
    border-bottom: 1px solid #e0e0e0;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.modal-body {
    padding: 20px;
}

.block-preview {
    margin: 20px 0;
    padding: 15px;
    background: #f8f9fa;
    border-radius: 4px;
}

.feature-item {
    background: white;
    padding: 15px;
    border-radius: 4px;
    text-align: center;
}

.close-modal {
    background: none;
    border: none;
    font-size: 24px;
    cursor: pointer;
}

.form-actions {
    display: flex;
    gap: 10px;
    justify-content: flex-end;
    margin-top: 20px;
}



=== FILE: ./countries/armenia.html ===




